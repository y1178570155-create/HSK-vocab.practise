<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.åŠŸèƒ½è¯ä¸æ ¸å¿ƒè¯­æ³• - HSKç»ƒä¹ </title>
    <style>
        :root {
            /* è“è‰²ä¸»é¢˜ï¼Œä»£è¡¨é€»è¾‘ä¸ç»“æ„ */
            --primary: #0984e3;
            --secondary: #74b9ff;
            --correct: #00b894;
            --wrong: #d63031;
            --bg: #dfe6e9;
            --card-bg: #ffffff;
            --text: #2d3436;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--text);
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 16px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        h1 { margin: 0; font-size: 1.2rem; letter-spacing: 1px; }
        .stats { margin-top: 8px; font-size: 0.95rem; opacity: 0.95; font-weight: 500; }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            flex-grow: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        /* æ¬¢è¿ç•Œé¢ */
        .start-screen {
            text-align: center;
            margin: auto;
            width: 100%;
        }
        .start-icon { font-size: 4rem; margin-bottom: 20px; }
        .start-info {
            background: #f1f2f6;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: left;
            border: 1px solid #dcede6;
        }
        .start-info p { margin: 10px 0; font-size: 1rem; color: #555; }
        
        .btn-start {
            background: var(--correct);
            color: white;
            border: none;
            padding: 16px 50px;
            font-size: 1.25rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }
        .btn-start:active { transform: scale(0.96); }

        /* é¢˜ç›®åŒºåŸŸ */
        .q-badge {
            display: inline-block;
            background: #dff9fb;
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .q-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #2d3436;
        }

        /* æ‹¼éŸ³æ ‡æ³¨æ ·å¼ */
        ruby { ruby-position: over; }
        rt { font-size: 0.6em; color: #636e72; font-weight: normal; user-select: none; }

        /* é€‰é¡¹æŒ‰é’® */
        .options-grid { display: grid; gap: 14px; }
        
        .option-btn {
            background: white;
            border: 2px solid #b2bec3;
            padding: 16px;
            border-radius: 12px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #2d3436;
            position: relative;
        }

        .option-btn:hover:not(:disabled) { border-color: var(--primary); background: #f1f2f6; }

        .option-btn.correct { background: #e8f8f5; border-color: var(--correct); color: #00b894; font-weight: bold; }
        .option-btn.wrong { background: #ffeaa7; border-color: var(--wrong); color: #d63031; }
        .option-btn:disabled { cursor: default; }

        /* è§£æåŒºåŸŸ */
        .feedback {
            margin-top: 25px;
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid #bdc3c7;
            display: none;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .feedback.is-correct { border-left-color: var(--correct); background: #f0fff4; }
        .feedback.is-wrong { border-left-color: var(--wrong); background: #fff5f5; }

        .thai-expl { margin-top: 8px; font-size: 1rem; color: #666; }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-buttons {
            margin-top: auto;
            padding-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: opacity 0.2s;
        }
        .nav-btn.prev { background: #dfe6e9; color: #636e72; }
        .nav-btn.next { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }

        /* ç»“æœé¡µ */
        .result-score { font-size: 4rem; color: var(--primary); margin: 20px 0; font-weight: 800; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>7.åŠŸèƒ½è¯ä¸æ ¸å¿ƒè¯­æ³•</h1>
        <div class="stats">
            <span id="progress">å‡†å¤‡å¼€å§‹</span> | <span id="score">å¾—åˆ†: 0</span>
        </div>
    </header>

    <div class="content">
        <div id="start-screen" class="start-screen">
            <div class="start-icon">ğŸ”—ğŸ“–âœ…</div>
            <h2>HSK è¯­æ³•ä¸“é¡¹ç»ƒä¹ </h2>
            <div class="start-info">
                <p>ğŸ“ <strong>å†…å®¹ï¼š</strong> åŠ©è¯ã€è¿è¯ã€ä»‹è¯ã€å‰¯è¯</p>
                <p>ğŸ“ <strong>é¢˜é‡ï¼š</strong> 43 é¢˜ (43 à¸‚à¹‰à¸­)</p>
                <p>ğŸ’¯ <strong>æ»¡åˆ†ï¼š</strong> 86 åˆ† (86 à¸„à¸°à¹à¸™à¸™)</p>
                <p>ğŸ’¡ <strong>è§„åˆ™ï¼š</strong> åªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ</p>
            </div>
            <button class="btn-start" onclick="app.startQuiz()">å¼€å§‹ç»ƒä¹  (à¹€à¸£à¸´à¹ˆà¸¡)</button>
        </div>

        <div id="quiz-area" style="display: none; height: 100%; flex-direction: column;">
            <div id="question-container" style="flex-grow: 1;"></div>
            
            <div id="feedback-box" class="feedback"></div>

            <div class="nav-buttons">
                <button id="btn-prev" class="nav-btn prev" onclick="app.prevQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                <button id="btn-next" class="nav-btn next" onclick="app.nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <div id="result-screen" class="start-screen" style="display: none;">
            <h2>ç»ƒä¹ å®Œæˆ (à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™)</h2>
            <div class="result-score" id="final-score">0</div>
            <p style="color: #636e72; margin-bottom: 30px;">æ»¡åˆ† 86 åˆ†</p>
            <button class="btn-start" onclick="location.reload()">å†ç»ƒä¸€æ¬¡ (à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡)</button>
        </div>
    </div>
</div>

<script>
// é¢˜ç›®æ•°æ®ï¼š43é“é¢˜ (æ¯é¢˜2åˆ†)
const questionData = [
    // --- Part 1: æ‹¼éŸ³ä¸è¯­è°ƒ (1-5) ---
    { q: "ä¸å»", options: ["bÃº qÃ¹", "bÃ¹ qÃ¹", "bÃº qÅ«", "bÃ¹ qÅ«"], answer: 0, explain: "â€œä¸â€åœ¨å››å£°å‰å˜äºŒå£° (bÃº)ã€‚", isPinyin: true },
    { q: "ä¸€ä¸ª", options: ["yÃ­ gÃ¨", "yÄ« gÃ¨", "yÃ¬ gÃ¨", "yÃ¬ ge"], answer: 0, explain: "â€œä¸€â€åœ¨å››å£°å‰å˜äºŒå£° (yÃ­)ã€‚", isPinyin: true },
    { q: "è§‰å¾—", options: ["juÃ© de", "jiÃ o de", "juÃ© dÃ©", "jiÃ o dÃ©"], answer: 0, explain: "â€œå¾—â€åœ¨è¿™é‡Œè¯»è½»å£° (de)ã€‚", isPinyin: true },
    { q: "çœ‹ç€", options: ["kÃ n zhe", "kÃ n zhÃ¡o", "kÃ n zhuÃ³", "kÃ n ze"], answer: 0, explain: "è¡¨ç¤ºçŠ¶æ€æŒç»­è¯»è½»å£° (zhe)ã€‚", isPinyin: true },
    { q: "æ²¡é”™", options: ["mÃ©i cuÃ²", "mÄ›i cuÃ²", "mÃ©i cuÃ³", "mÃ¨i cuÃ²"], answer: 0, explain: "mÃ©i cuÃ² = à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡/à¹„à¸¡à¹ˆà¸œà¸´à¸” (That's right).", isPinyin: true },

    // --- Part 2: åŠ©è¯ (6-14) ---
    { q: "è¿™æ˜¯æˆ‘____ä¹¦ã€‚", options: ["<ruby>çš„<rt>de</rt></ruby>", "<ruby>åœ°<rt>de</rt></ruby>", "<ruby>å¾—<rt>de</rt></ruby>", "<ruby>äº†<rt>le</rt></ruby>"], answer: 0, explain: "åè¯ + çš„ + åè¯ (à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡ = à¸‚à¸­à¸‡)ã€‚", isPinyin: false },
    { q: "ä»–é«˜å…´____ç¬‘äº†ã€‚", options: ["<ruby>åœ°<rt>de</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>", "<ruby>å¾—<rt>de</rt></ruby>", "<ruby>ç€<rt>zhe</rt></ruby>"], answer: 0, explain: "å½¢å®¹è¯ + åœ° + åŠ¨è¯ (à¸‚à¸¢à¸²à¸¢à¸à¸£à¸´à¸¢à¸² = à¸­à¸¢à¹ˆà¸²à¸‡...)ã€‚", isPinyin: false },
    { q: "ä»–è·‘____å¾ˆå¿«ã€‚", options: ["<ruby>å¾—<rt>de</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>", "<ruby>åœ°<rt>de</rt></ruby>", "<ruby>äº†<rt>le</rt></ruby>"], answer: 0, explain: "åŠ¨è¯ + å¾— + å½¢å®¹è¯ (à¸šà¸­à¸à¸£à¸°à¸”à¸±à¸šà¸‚à¸­à¸‡à¸à¸²à¸£à¸à¸£à¸°à¸—à¸³ = à¹„à¸”à¹‰...)ã€‚", isPinyin: false },
    { q: "æˆ‘åƒ____è¯å°±ç¡è§‰äº†ã€‚", options: ["<ruby>äº†<rt>le</rt></ruby>", "<ruby>ç€<rt>zhe</rt></ruby>", "<ruby>è¿‡<rt>guo</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>"], answer: 0, explain: "åŠ¨è¯ + äº† (è¡¨ç¤ºåŠ¨ä½œå®Œæˆ = à¹à¸¥à¹‰à¸§)ã€‚", isPinyin: false },
    { q: "é—¨å¼€____å‘¢ï¼Œä½ è¿›å»å§ã€‚", options: ["<ruby>ç€<rt>zhe</rt></ruby>", "<ruby>äº†<rt>le</rt></ruby>", "<ruby>è¿‡<rt>guo</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>"], answer: 0, explain: "åŠ¨è¯ + ç€ (è¡¨ç¤ºçŠ¶æ€æŒç»­ = à¸­à¸¢à¸¹à¹ˆ/à¹„à¸§à¹‰)ã€‚", isPinyin: false },
    // åŸç¬¬11é¢˜ï¼ˆ"æˆ‘å»____ä¸­å›½ä¸¤æ¬¡"ï¼‰å·²åˆ é™¤
    { q: "å¤–è¾¹æ­£åœ¨ä¸‹____é›¨ã€‚", options: ["<ruby>ç€<rt>zhe</rt></ruby>", "<ruby>äº†<rt>le</rt></ruby>", "<ruby>è¿‡<rt>guo</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>"], answer: 0, explain: "æ­£åœ¨...ç€ (à¸à¸³à¸¥à¸±à¸‡...à¸­à¸¢à¸¹à¹ˆ)ã€‚", isPinyin: false },
    { q: "ä½ ä¼šåš____èœå—ï¼Ÿ", options: ["<ruby>ä¸­å›½<rt>ZhÅngguÃ³</rt></ruby>", "<ruby>ä¸­æ–‡<rt>ZhÅngwÃ©n</rt></ruby>", "<ruby>æ±‰è¯­<rt>HÃ nyÇ”</rt></ruby>", "<ruby>æ±‰å­—<rt>HÃ nzÃ¬</rt></ruby>"], answer: 0, explain: "åš + ä¸­å›½ + èœ (à¸—à¸³à¸­à¸²à¸«à¸²à¸£à¸ˆà¸µà¸™)ã€‚", isPinyin: false },
    { q: "å¥¹è¯´æ±‰è¯­è¯´____çœŸå¥½ã€‚", options: ["<ruby>å¾—<rt>de</rt></ruby>", "<ruby>çš„<rt>de</rt></ruby>", "<ruby>åœ°<rt>de</rt></ruby>", "<ruby>ç€<rt>zhe</rt></ruby>"], answer: 0, explain: "è¯´å¾—å¥½ (à¸à¸¹à¸”à¹„à¸”à¹‰à¸”à¸µ)ã€‚", isPinyin: false },
    { q: "é‚£æ˜¯è°____è‡ªè¡Œè½¦ï¼Ÿ", options: ["<ruby>çš„<rt>de</rt></ruby>", "<ruby>åœ°<rt>de</rt></ruby>", "<ruby>å¾—<rt>de</rt></ruby>", "<ruby>äº†<rt>le</rt></ruby>"], answer: 0, explain: "è°çš„ (à¸‚à¸­à¸‡à¹ƒà¸„à¸£)ã€‚", isPinyin: false },

    // --- Part 3: è¿è¯ä¸é€»è¾‘ (15-24) ---
    { q: "____ä¸‹é›¨äº†ï¼Œæ‰€ä»¥æˆ‘æ²¡å»ã€‚", options: ["<ruby>å› ä¸º<rt>yÄ«nwÃ¨i</rt></ruby>", "<ruby>æ‰€ä»¥<rt>suÇ’yÇ</rt></ruby>", "<ruby>è™½ç„¶<rt>suÄ«rÃ¡n</rt></ruby>", "<ruby>ä½†æ˜¯<rt>dÃ nshÃ¬</rt></ruby>"], answer: 0, explain: "å› ä¸º...æ‰€ä»¥... (à¹€à¸à¸£à¸²à¸°à¸§à¹ˆà¸²...à¸”à¸±à¸‡à¸™à¸±à¹‰à¸™...)ã€‚", isPinyin: false },
    { q: "è™½ç„¶ä»–æ˜¯å¤–å›½äººï¼Œ____æ±‰è¯­è¯´å¾—å¾ˆå¥½ã€‚", options: ["<ruby>ä½†æ˜¯<rt>dÃ nshÃ¬</rt></ruby>", "<ruby>å› ä¸º<rt>yÄ«nwÃ¨i</rt></ruby>", "<ruby>æ‰€ä»¥<rt>suÇ’yÇ</rt></ruby>", "<ruby>ç„¶å<rt>rÃ¡nhÃ²u</rt></ruby>"], answer: 0, explain: "è™½ç„¶...ä½†æ˜¯... (à¹à¸¡à¹‰à¸§à¹ˆà¸²...à¹à¸•à¹ˆ...)ã€‚", isPinyin: false },
    { q: "ä½ è¦å–èŒ¶____å’–å•¡ï¼Ÿ", options: ["<ruby>è¿˜æ˜¯<rt>hÃ¡ishi</rt></ruby>", "<ruby>æˆ–è€…<rt>huÃ²zhÄ›</rt></ruby>", "<ruby>å’Œ<rt>hÃ©</rt></ruby>", "<ruby>è·Ÿ<rt>gÄ“n</rt></ruby>"], answer: 0, explain: "ç–‘é—®å¥ç”¨â€œè¿˜æ˜¯â€ (à¸›à¸£à¸°à¹‚à¸¢à¸„à¸„à¸³à¸–à¸²à¸¡à¹ƒà¸Šà¹‰ è¿˜æ˜¯ = à¸«à¸£à¸·à¸­)ã€‚", isPinyin: false },
    { q: "æˆ‘æƒ³ä¹°è‹¹æœ____é¦™è•‰ã€‚", options: ["<ruby>æˆ–è€…<rt>huÃ²zhÄ›</rt></ruby>", "<ruby>è¿˜æ˜¯<rt>hÃ¡ishi</rt></ruby>", "<ruby>è™½ç„¶<rt>suÄ«rÃ¡n</rt></ruby>", "<ruby>ä½†æ˜¯<rt>dÃ nshÃ¬</rt></ruby>"], answer: 0, explain: "é™ˆè¿°å¥ç”¨â€œæˆ–è€…â€ (à¸›à¸£à¸°à¹‚à¸¢à¸„à¸šà¸­à¸à¹€à¸¥à¹ˆà¸²à¹ƒà¸Šà¹‰ æˆ–è€… = à¸«à¸£à¸·à¸­)ã€‚", isPinyin: false },
    { q: "æˆ‘å’Œä»–____æ˜¯å­¦ç”Ÿã€‚", options: ["<ruby>éƒ½<rt>dÅu</rt></ruby>", "<ruby>ä¹Ÿ<rt>yÄ›</rt></ruby>", "<ruby>å¾ˆ<rt>hÄ›n</rt></ruby>", "<ruby>å¤ª<rt>tÃ i</rt></ruby>"], answer: 0, explain: "Aå’ŒB + éƒ½ (à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆ/à¸¥à¹‰à¸§à¸™à¹€à¸›à¹‡à¸™...)ã€‚", isPinyin: false },
    { q: "ä»–ä¸åƒè‚‰ï¼Œæˆ‘____ä¸åƒã€‚", options: ["<ruby>ä¹Ÿ<rt>yÄ›</rt></ruby>", "<ruby>éƒ½<rt>dÅu</rt></ruby>", "<ruby>å†<rt>zÃ i</rt></ruby>", "<ruby>è¿˜<rt>hÃ¡i</rt></ruby>"], answer: 0, explain: "A..., Bä¹Ÿ... (...à¸à¹‡...à¹€à¸«à¸¡à¸·à¸­à¸™à¸à¸±à¸™)ã€‚", isPinyin: false },
    { q: "ä»–____åƒé¥­____çœ‹ç”µè§†ã€‚", options: ["<ruby>ä¸€è¾¹...ä¸€è¾¹...<rt>yÃ¬biÄn...yÃ¬biÄn...</rt></ruby>", "<ruby>åˆ...åˆ...<rt>yÃ²u...yÃ²u...</rt></ruby>", "<ruby>è¶Š...è¶Š...<rt>yuÃ¨...yuÃ¨...</rt></ruby>", "<ruby>æœ€...æœ€...<rt>zuÃ¬...zuÃ¬...</rt></ruby>"], answer: 0, explain: "ä¸€è¾¹...ä¸€è¾¹... (à¸—à¸³à¸ªà¸­à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™ = à¹„à¸›à¸”à¹‰à¸§à¸¢...à¹„à¸›à¸”à¹‰à¸§à¸¢)ã€‚", isPinyin: false },
    { q: "è¿™å„¿____é‚£å„¿è¿œã€‚", options: ["<ruby>ç¦»<rt>lÃ­</rt></ruby>", "<ruby>ä»<rt>cÃ³ng</rt></ruby>", "<ruby>åœ¨<rt>zÃ i</rt></ruby>", "<ruby>å¾€<rt>wÇng</rt></ruby>"], answer: 0, explain: "A ç¦» B + Adj (A à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸ B...)ã€‚", isPinyin: false },
    { q: "åªè¦åŠªåŠ›ï¼Œ____èƒ½å­¦å¥½ã€‚", options: ["<ruby>å°±<rt>jiÃ¹</rt></ruby>", "<ruby>æ‰<rt>cÃ¡i</rt></ruby>", "<ruby>ä¹Ÿ<rt>yÄ›</rt></ruby>", "<ruby>éƒ½<rt>dÅu</rt></ruby>"], answer: 0, explain: "åªè¦...å°±... (à¸‚à¸­à¹à¸„à¹ˆ...à¸à¹‡...)ã€‚", isPinyin: false },
    { q: "é™¤äº†ç¯®çƒï¼Œæˆ‘____å–œæ¬¢è¶³çƒã€‚", options: ["<ruby>è¿˜<rt>hÃ¡i</rt></ruby>", "<ruby>å°±<rt>jiÃ¹</rt></ruby>", "<ruby>æ‰<rt>cÃ¡i</rt></ruby>", "<ruby>åœ¨<rt>zÃ i</rt></ruby>"], answer: 0, explain: "é™¤äº†...è¿˜... (à¸™à¸­à¸à¸ˆà¸²à¸...à¹à¸¥à¹‰à¸§ à¸¢à¸±à¸‡...)ã€‚", isPinyin: false },

    // --- Part 4: ä»‹è¯ä¸ç‰¹æ®Šå¥å¼ (25-34) ---
    { q: "è¯·____ä¹¦æ‰“å¼€ã€‚", options: ["<ruby>æŠŠ<rt>bÇ</rt></ruby>", "<ruby>è¢«<rt>bÃ¨i</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>"], answer: 0, explain: "æŠŠå­—å¥ï¼šSubject + æŠŠ + Object + Verb (à¸™à¸³/à¹€à¸­à¸²...à¹€à¸›à¸´à¸”à¸­à¸­à¸)ã€‚", isPinyin: false },
    { q: "æˆ‘çš„è‹¹æœ____ä»–åƒå®Œäº†ã€‚", options: ["<ruby>è¢«<rt>bÃ¨i</rt></ruby>", "<ruby>æŠŠ<rt>bÇ</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>"], answer: 0, explain: "è¢«å­—å¥ï¼šObject + è¢« + Subject + Verb (à¸–à¸¹à¸à¸à¸£à¸°à¸—à¸³ = à¹à¸­à¸›à¹€à¸›à¸´à¹‰à¸¥à¸–à¸¹à¸à¹€à¸‚à¸²à¸à¸´à¸™à¸«à¸¡à¸”à¹à¸¥à¹‰à¸§)ã€‚", isPinyin: false },
    { q: "è¿™æ˜¯æˆ‘____ä½ ä¹°çš„ç¤¼ç‰©ã€‚", options: ["<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>", "<ruby>å‘<rt>xiÃ ng</rt></ruby>", "<ruby>è·Ÿ<rt>gÄ“n</rt></ruby>"], answer: 0, explain: "ç»™ + äºº + Verb (à¸—à¸³à¹ƒà¸«à¹‰/à¹ƒà¸«à¹‰... = à¸‹à¸·à¹‰à¸­à¹ƒà¸«à¹‰à¸„à¸¸à¸“)ã€‚", isPinyin: false },
    { q: "å¸çƒŸ____èº«ä½“ä¸å¥½ã€‚", options: ["<ruby>å¯¹<rt>duÃ¬</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å‘<rt>xiÃ ng</rt></ruby>", "<ruby>è·Ÿ<rt>gÄ“n</rt></ruby>"], answer: 0, explain: "å¯¹...å¥½/ä¸å¥½ (à¸•à¹ˆà¸­... = à¸ªà¸¹à¸šà¸šà¸¸à¸«à¸£à¸µà¹ˆà¹„à¸¡à¹ˆà¸”à¸µà¸•à¹ˆà¸­à¸ªà¸¸à¸‚à¸ à¸²à¸)ã€‚", isPinyin: false },
    { q: "ä¸€ç›´____å‰èµ°ï¼Œå°±æ˜¯å­¦æ ¡ã€‚", options: ["<ruby>å¾€<rt>wÇng</rt></ruby>", "<ruby>åœ¨<rt>zÃ i</rt></ruby>", "<ruby>ä»<rt>cÃ³ng</rt></ruby>", "<ruby>ç¦»<rt>lÃ­</rt></ruby>"], answer: 0, explain: "å¾€ + æ–¹å‘ + èµ° (à¹„à¸›à¸¢à¸±à¸‡à¸—à¸´à¸¨à¸—à¸²à¸‡... = à¹€à¸”à¸´à¸™à¹„à¸›à¸‚à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²)ã€‚", isPinyin: false },
    { q: "æˆ‘æ˜¯____åŒ—äº¬æ¥çš„ã€‚", options: ["<ruby>ä»<rt>cÃ³ng</rt></ruby>", "<ruby>ç¦»<rt>lÃ­</rt></ruby>", "<ruby>åœ¨<rt>zÃ i</rt></ruby>", "<ruby>å»<rt>qÃ¹</rt></ruby>"], answer: 0, explain: "ä» + Place + æ¥ (à¸¡à¸²à¸ˆà¸²à¸...)ã€‚", isPinyin: false },
    { q: "æˆ‘____ä»–ä¸€èµ·å»ã€‚", options: ["<ruby>è·Ÿ<rt>gÄ“n</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>", "<ruby>å‘<rt>xiÃ ng</rt></ruby>"], answer: 0, explain: "è·Ÿ/å’Œ...ä¸€èµ· (à¹„à¸›...à¸à¸±à¸šà¹€à¸‚à¸²)ã€‚", isPinyin: false },
    { q: "ä»–æ¯”æˆ‘____å¤§ã€‚", options: ["<ruby>æ›´<rt>gÃ¨ng</rt></ruby>", "<ruby>å¾ˆ<rt>hÄ›n</rt></ruby>", "<ruby>éå¸¸<rt>fÄ“ichÃ¡ng</rt></ruby>", "<ruby>æœ€<rt>zuÃ¬</rt></ruby>"], answer: 0, explain: "æ¯”...æ›´... (à¸¢à¸´à¹ˆà¸‡à¸à¸§à¹ˆà¸²... = à¹€à¸‚à¸²à¹‚à¸•à¸à¸§à¹ˆà¸²à¸‰à¸±à¸™à¸­à¸µà¸)ã€‚", isPinyin: false },
    { q: "è¿™ä»¶è¡£æœ____é‚£ä»¶ä¸€æ ·ã€‚", options: ["<ruby>è·Ÿ<rt>gÄ“n</rt></ruby>", "<ruby>æ¯”<rt>bÇ</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>"], answer: 0, explain: "è·Ÿ...ä¸€æ · (à¹€à¸«à¸¡à¸·à¸­à¸™à¸à¸±à¸š...)ã€‚", isPinyin: false },
    { q: "æˆ‘æ²¡æœ‰ä»–____é«˜ã€‚", options: ["<ruby>é‚£ä¹ˆ<rt>nÃ me</rt></ruby>", "<ruby>æ€ä¹ˆ<rt>zÄ›nme</rt></ruby>", "<ruby>ä»€ä¹ˆ<rt>shÃ©nme</rt></ruby>", "<ruby>å¤šä¹ˆ<rt>duÅme</rt></ruby>"], answer: 0, explain: "æ²¡æœ‰...é‚£ä¹ˆ... (à¹„à¸¡à¹ˆ...à¸‚à¸™à¸²à¸”à¸™à¸±à¹‰à¸™ = à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸ªà¸¹à¸‡à¸‚à¸™à¸²à¸”à¹€à¸‚à¸²)ã€‚", isPinyin: false },

    // --- Part 5: å‰¯è¯ä¸ç»¼åˆ (35-43) ---
    { q: "ä»–æ—©ä¸Šå…«ç‚¹____æ¥äº†ã€‚", options: ["<ruby>å°±<rt>jiÃ¹</rt></ruby>", "<ruby>æ‰<rt>cÃ¡i</rt></ruby>", "<ruby>å†<rt>zÃ i</rt></ruby>", "<ruby>åˆ<rt>yÃ²u</rt></ruby>"], answer: 0, explain: "å°± (à¹€à¸£à¹‡à¸§à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”/à¸£à¸²à¸šà¸£à¸·à¹ˆà¸™ = 8 à¹‚à¸¡à¸‡à¸à¹‡à¸¡à¸²à¹à¸¥à¹‰à¸§)ã€‚", isPinyin: false },
    { q: "ä»–æ™šä¸Šåä¸€ç‚¹____å›å®¶ã€‚", options: ["<ruby>æ‰<rt>cÃ¡i</rt></ruby>", "<ruby>å°±<rt>jiÃ¹</rt></ruby>", "<ruby>éƒ½<rt>dÅu</rt></ruby>", "<ruby>ä¹Ÿ<rt>yÄ›</rt></ruby>"], answer: 0, explain: "æ‰ (à¸Šà¹‰à¸²à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”/à¹€à¸à¸´à¹ˆà¸‡à¸ˆà¸° = 5 à¸—à¸¸à¹ˆà¸¡à¹€à¸à¸´à¹ˆà¸‡à¸ˆà¸°à¸à¸¥à¸±à¸š)ã€‚", isPinyin: false },
    { q: "è¯·____è¯´è¯äº†ã€‚", options: ["<ruby>åˆ«<rt>biÃ©</rt></ruby>", "<ruby>ä¸<rt>bÃ¹</rt></ruby>", "<ruby>æ²¡<rt>mÃ©i</rt></ruby>", "<ruby>é<rt>fÄ“i</rt></ruby>"], answer: 0, explain: "åˆ« + Verb (à¸«à¹‰à¸²à¸¡/à¸­à¸¢à¹ˆà¸²... = à¸­à¸¢à¹ˆà¸²à¸„à¸¸à¸¢à¸à¸±à¸™)ã€‚", isPinyin: false },
    // åŸç¬¬39é¢˜ï¼ˆ"æˆ‘____æ²¡å»è¿‡é‚£ä¸ªåœ°æ–¹"ï¼‰å·²åˆ é™¤
    { q: "è¿™ä¸ªé—®é¢˜æˆ‘____ä¸æ‡‚ã€‚", options: ["<ruby>å®Œå…¨<rt>wÃ¡nquÃ¡n</rt></ruby>", "<ruby>å®Œæˆ<rt>wÃ¡nchÃ©ng</rt></ruby>", "<ruby>å®Œæ•´<rt>wÃ¡nzhÄ›ng</rt></ruby>", "<ruby>å®Œå¥½<rt>wÃ¡nhÇo</rt></ruby>"], answer: 0, explain: "å®Œå…¨ (à¹‚à¸”à¸¢à¸ªà¸´à¹‰à¸™à¹€à¸Šà¸´à¸‡ = à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹€à¸¥à¸¢)ã€‚", isPinyin: false },
    { q: "å¿«ç‚¹å„¿ï¼Œæˆ‘ä»¬è¦____äº†ã€‚", options: ["<ruby>è¿Ÿåˆ°<rt>chÃ­dÃ o</rt></ruby>", "<ruby>çŸ¥é“<rt>zhÄ«dao</rt></ruby>", "<ruby>ç­‰åˆ°<rt>dÄ›ngdÃ o</rt></ruby>", "<ruby>çœ‹åˆ°<rt>kÃ ndÃ o</rt></ruby>"], answer: 0, explain: "è¦...è¿Ÿåˆ°äº† (à¸ªà¸²à¸¢à¹à¸¥à¹‰à¸§)ã€‚", isPinyin: false },
    { q: "è¿™é“é¢˜å¤ªéš¾äº†ï¼Œ____æˆ‘ä¹Ÿä¸ä¼šã€‚", options: ["<ruby>è¿<rt>liÃ¡n</rt></ruby>", "<ruby>è„¸<rt>liÇn</rt></ruby>", "<ruby>ç»ƒ<rt>liÃ n</rt></ruby>", "<ruby>è”<rt>liÃ¡n</rt></ruby>"], answer: 0, explain: "è¿...ä¹Ÿ/éƒ½... (à¹à¸¡à¹‰à¹à¸•à¹ˆ...à¸à¹‡... = à¹à¸¡à¹‰à¹à¸•à¹ˆà¸‰à¸±à¸™à¸à¹‡à¸—à¸³à¹„à¸¡à¹ˆà¹€à¸›à¹‡à¸™)ã€‚", isPinyin: false },
    { q: "å…³äºè¿™ä»¶äº‹ï¼Œæˆ‘____ä¸çŸ¥é“ã€‚", options: ["<ruby>ä¸€ç‚¹å„¿ä¹Ÿ<rt>yÃ¬diÇnr yÄ›</rt></ruby>", "<ruby>æœ‰ç‚¹å„¿<rt>yÇ’udiÇnr</rt></ruby>", "<ruby>ä¸€äº›<rt>yÃ¬xiÄ“</rt></ruby>", "<ruby>ä¸€ä¼š<rt>yÃ­huÃ¬</rt></ruby>"], answer: 0, explain: "ä¸€ç‚¹å„¿ä¹Ÿ + ä¸/æ²¡ (à¹„à¸¡à¹ˆ...à¹€à¸¥à¸¢à¸ªà¸±à¸à¸™à¸´à¸”)ã€‚", isPinyin: false },
    { q: "____æ˜å¤©ä¸‹é›¨ï¼Œæˆ‘ä»¬å°±ä¸å»äº†ã€‚", options: ["<ruby>å¦‚æœ<rt>rÃºguÇ’</rt></ruby>", "<ruby>åæœ<rt>hÃ²uguÇ’</rt></ruby>", "<ruby>ç»“æœ<rt>jiÃ©guÇ’</rt></ruby>", "<ruby>è‹¹æœ<rt>pÃ­ngguÇ’</rt></ruby>"], answer: 0, explain: "å¦‚æœ...å°±... (à¸–à¹‰à¸²...à¸à¹‡... = à¸–à¹‰à¸²à¸à¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰à¸à¸™à¸•à¸... )ã€‚", isPinyin: false },
    { q: "____ä¸‹é›¨ï¼Œæˆ‘ä»¬ä¹Ÿå»ã€‚", options: ["<ruby>å³ä½¿<rt>jÃ­shÇ</rt></ruby>", "<ruby>å¦‚æœ<rt>rÃºguÇ’</rt></ruby>", "<ruby>è¦æ˜¯<rt>yÃ oshi</rt></ruby>", "<ruby>å› ä¸º<rt>yÄ«nwÃ¨i</rt></ruby>"], answer: 0, explain: "å³ä½¿...ä¹Ÿ... (à¸•à¹ˆà¸­à¹ƒà¸«à¹‰/à¹à¸¡à¹‰à¸§à¹ˆà¸²...à¸à¹‡... = à¸•à¹ˆà¸­à¹ƒà¸«à¹‰à¸à¸™à¸•à¸ à¹€à¸£à¸²à¸à¹‡à¸ˆà¸°à¹„à¸›)ã€‚", isPinyin: false }
];

// --- ç¨‹åºé€»è¾‘ ---
const app = {
    currentIndex: 0,
    score: 0,
    answers: new Array(questionData.length).fill(null),
    shuffledQs: [],

    init: function() {
        // æ´—ç‰Œé¢˜ç›®é€‰é¡¹
        this.shuffledQs = questionData.map((item, index) => {
            let indices = [0, 1, 2, 3];
            // Fisher-Yates shuffle
            for (let i = indices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indices[i], indices[j]] = [indices[j], indices[i]];
            }
            return {
                ...item,
                originalIndex: index,
                shuffledIndices: indices
            };
        });
    },

    startQuiz: function() {
        this.init();
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'flex';
        this.renderQuestion();
    },

    renderQuestion: function() {
        const qIndex = this.currentIndex;
        const q = this.shuffledQs[qIndex];
        
        // æ›´æ–°è¿›åº¦
        document.getElementById('progress').innerText = `é¢˜ç›®: ${qIndex + 1}/${questionData.length}`;
        
        // æ¸²æŸ“é¢˜ç›®
        const container = document.getElementById('question-container');
        let badge = q.isPinyin ? "æ‹¼éŸ³ä¸å£°è°ƒ" : "è¯­æ³•ä¸è¯æ±‡";
        
        let html = `<div class="q-badge">${badge}</div>`;
        html += `<div class="q-text">${qIndex + 1}. ${q.q}</div>`;
        html += `<div class="options-grid">`;
        
        q.shuffledIndices.forEach(optIndex => {
            let btnClass = "option-btn";
            let disabled = "";
            let onclick = `onclick="app.checkAnswer(${optIndex})"`;
            
            // å¦‚æœå·²ä½œç­”
            if (this.answers[qIndex] !== null) {
                disabled = "disabled";
                onclick = "";
                if (optIndex === q.answer) {
                    btnClass += " correct";
                } else if (this.answers[qIndex] === optIndex) {
                    btnClass += " wrong";
                }
            }
            
            html += `<button class="${btnClass}" ${disabled} ${onclick}>${q.options[optIndex]}</button>`;
        });
        
        html += `</div>`;
        container.innerHTML = html;

        this.updateFeedback();
        this.updateNavButtons();
    },

    checkAnswer: function(selectedIndex) {
        if (this.answers[this.currentIndex] !== null) return;
        
        this.answers[this.currentIndex] = selectedIndex;
        const q = this.shuffledQs[this.currentIndex];
        
        if (selectedIndex === q.answer) {
            this.score += 2; // æ¯é¢˜2åˆ†
            document.getElementById('score').innerText = `å¾—åˆ†: ${this.score}`;
        }
        
        this.renderQuestion();
    },

    updateFeedback: function() {
        const qIndex = this.currentIndex;
        const q = this.shuffledQs[qIndex];
        const userAns = this.answers[qIndex];
        const feedbackBox = document.getElementById('feedback-box');
        
        if (userAns !== null) {
            feedbackBox.style.display = 'block';
            const isCorrect = userAns === q.answer;
            feedbackBox.className = `feedback ${isCorrect ? 'is-correct' : 'is-wrong'}`;
            
            // è·å–æ­£ç¡®ç­”æ¡ˆæ–‡æœ¬ï¼ˆå»é™¤Rubyæ ‡ç­¾ç”¨äºçº¯æ–‡æœ¬æ˜¾ç¤ºï¼‰
            let tempDiv = document.createElement("div");
            tempDiv.innerHTML = q.options[q.answer];
            let correctText = tempDiv.innerText;

            feedbackBox.innerHTML = `
                <strong>${isCorrect ? 'âœ… å›ç­”æ­£ç¡® (à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡)' : 'âŒ å›ç­”é”™è¯¯ (à¸•à¸­à¸šà¸œà¸´à¸”)'}</strong>
                <div style="margin-top:5px;">æ­£ç¡®ç­”æ¡ˆ: <b>${correctText}</b></div>
                <div class="thai-expl">è§£æ: ${q.explain}</div>
            `;
        } else {
            feedbackBox.style.display = 'none';
        }
    },

    updateNavButtons: function() {
        document.getElementById('btn-prev').disabled = this.currentIndex === 0;
        const nextBtn = document.getElementById('btn-next');
        
        if (this.answers[this.currentIndex] === null) {
            nextBtn.disabled = true;
        } else {
            nextBtn.disabled = false;
        }

        if (this.currentIndex === questionData.length - 1) {
            nextBtn.innerText = "æŸ¥çœ‹æˆç»© (à¸”à¸¹à¸„à¸°à¹à¸™à¸™)";
            nextBtn.onclick = () => this.showResult();
        } else {
            nextBtn.innerText = "ä¸‹ä¸€é¢˜ (à¸‚à¹‰à¸­à¸–à¸±à¸”à¹„à¸›)";
            nextBtn.onclick = () => this.nextQuestion();
        }
    },

    nextQuestion: function() {
        if (this.currentIndex < questionData.length - 1) {
            this.currentIndex++;
            this.renderQuestion();
        }
    },

    prevQuestion: function() {
        if (this.currentIndex > 0) {
            this.currentIndex--;
            this.renderQuestion();
        }
    },

    showResult: function() {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = this.score;
    }
};
</script>

</body>
</html>