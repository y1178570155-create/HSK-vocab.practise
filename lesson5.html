<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5.æƒ…æ„Ÿã€çŠ¶æ€ä¸èº«ä½“ - HSKç»ƒä¹ </title>
    <style>
        :root {
            /* æš–è‰²è°ƒä¸»é¢˜ï¼Œå¯¹åº”èº«ä½“ä¸æƒ…æ„Ÿ */
            --primary: #FF6B6B; 
            --secondary: #FF8E8E;
            --correct: #27ae60;
            --wrong: #c0392b;
            --bg: #FFF0F0;
            --card-bg: #ffffff;
            --text: #4a4a4a;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--text);
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 16px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        h1 { margin: 0; font-size: 1.3rem; letter-spacing: 1px; }
        .stats { margin-top: 8px; font-size: 0.95rem; opacity: 0.95; font-weight: 500; }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            flex-grow: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        /* æ¬¢è¿ç•Œé¢ */
        .start-screen {
            text-align: center;
            margin: auto;
            width: 100%;
        }
        .start-icon { font-size: 4rem; margin-bottom: 20px; }
        .start-info {
            background: #fff5f5;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: left;
            border: 1px solid #ffe0e0;
        }
        .start-info p { margin: 10px 0; font-size: 1rem; color: #555; }
        
        .btn-start {
            background: var(--correct);
            color: white;
            border: none;
            padding: 16px 50px;
            font-size: 1.25rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }
        .btn-start:active { transform: scale(0.96); }

        /* é¢˜ç›®åŒºåŸŸ */
        .q-badge {
            display: inline-block;
            background: #ffe0e0;
            color: #d63031;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .q-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #2d3436;
        }

        /* æ‹¼éŸ³æ ‡æ³¨æ ·å¼ */
        ruby { ruby-position: over; }
        rt { font-size: 0.6em; color: #888; font-weight: normal; user-select: none; }

        /* é€‰é¡¹æŒ‰é’® */
        .options-grid { display: grid; gap: 14px; }
        
        .option-btn {
            background: white;
            border: 2px solid #f0f0f0;
            padding: 16px;
            border-radius: 12px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #555;
            position: relative;
        }

        .option-btn:hover:not(:disabled) { border-color: var(--primary); background: #fff5f5; }

        .option-btn.correct { background: #e8f8f5; border-color: var(--correct); color: #1e8449; font-weight: bold; }
        .option-btn.wrong { background: #fdedec; border-color: var(--wrong); color: #c0392b; }
        .option-btn:disabled { cursor: default; }

        /* è§£æåŒºåŸŸ */
        .feedback {
            margin-top: 25px;
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid #bdc3c7;
            display: none;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .feedback.is-correct { border-left-color: var(--correct); background: #f0fff4; }
        .feedback.is-wrong { border-left-color: var(--wrong); background: #fff5f5; }

        .thai-expl { margin-top: 8px; font-size: 1rem; color: #666; }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-buttons {
            margin-top: auto;
            padding-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: opacity 0.2s;
        }
        .nav-btn.prev { background: #f1f2f6; color: #747d8c; }
        .nav-btn.next { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }

        /* ç»“æœé¡µ */
        .result-score { font-size: 4rem; color: var(--primary); margin: 20px 0; font-weight: 800; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>5.æƒ…æ„Ÿã€çŠ¶æ€ä¸èº«ä½“</h1>
        <div class="stats">
            <span id="progress">å‡†å¤‡å¼€å§‹</span> | <span id="score">å¾—åˆ†: 0</span>
        </div>
    </header>

    <div class="content">
        <div id="start-screen" class="start-screen">
            <div class="start-icon">ğŸ˜ŠğŸ‘€ğŸ’Š</div>
            <h2>HSK è¯æ±‡ä¸“é¡¹ç»ƒä¹ </h2>
            <div class="start-info">
                <p>ğŸ“ <strong>å†…å®¹ï¼š</strong> èº«ä½“éƒ¨ä½ã€ç”Ÿç—…å¥åº·ã€æƒ…ç»ªæ„Ÿå—</p>
                <p>ğŸ“ <strong>é¢˜é‡ï¼š</strong> 40 é¢˜ (40 à¸‚à¹‰à¸­)</p>
                <p>ğŸ’¯ <strong>æ»¡åˆ†ï¼š</strong> 80 åˆ† (80 à¸„à¸°à¹à¸™à¸™)</p>
                <p>ğŸ’¡ <strong>è§„åˆ™ï¼š</strong> åªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ</p>
            </div>
            <button class="btn-start" onclick="app.startQuiz()">å¼€å§‹ç»ƒä¹  (à¹€à¸£à¸´à¹ˆà¸¡)</button>
        </div>

        <div id="quiz-area" style="display: none; height: 100%; flex-direction: column;">
            <div id="question-container" style="flex-grow: 1;"></div>
            
            <div id="feedback-box" class="feedback"></div>

            <div class="nav-buttons">
                <button id="btn-prev" class="nav-btn prev" onclick="app.prevQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                <button id="btn-next" class="nav-btn next" onclick="app.nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <div id="result-screen" class="start-screen" style="display: none;">
            <h2>ç»ƒä¹ å®Œæˆ (à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™)</h2>
            <div class="result-score" id="final-score">0</div>
            <p style="color: #7f8c8d; margin-bottom: 30px;">æ»¡åˆ† 80 åˆ†</p>
            <button class="btn-start" onclick="location.reload()">å†ç»ƒä¸€æ¬¡ (à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡)</button>
        </div>
    </div>
</div>

<script>
// é¢˜ç›®æ•°æ®ï¼šå…±40é¢˜ï¼Œæ‹¼éŸ³åœ¨å‰
const questionData = [
    // --- Part 1: æ‹¼éŸ³è¾¨æ (1-10) ---
    { q: "èº«ä½“", options: ["shÄ“n tÇ", "shÄ“n tÄ«", "shÄ“ng tÇ", "sÄ“n tÇ"], answer: 0, explain: "shÄ“n tÇ = à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢ (Body)", isPinyin: true },
    { q: "çœ¼ç›", options: ["yÇn jing", "yÇn jÄ«ng", "yÃ¡n jing", "yÇn jin"], answer: 0, explain: "yÇn jing = à¸”à¸§à¸‡à¸•à¸² (Eyes) *jing è¯»è½»å£°", isPinyin: true },
    { q: "é«˜å…´", options: ["gÄo xÃ¬ng", "gÄo xÄ«ng", "kÄo xÃ¬ng", "gÄo xÃ¬n"], answer: 0, explain: "gÄo xÃ¬ng = à¸”à¸µà¹ƒà¸ˆ (Happy)", isPinyin: true },
    { q: "ç”Ÿç—…", options: ["shÄ“ng bÃ¬ng", "shÄ“n bÃ¬ng", "shÄ“ng bÃ¬n", "sÄ“ng bÃ¬ng"], answer: 0, explain: "shÄ“ng bÃ¬ng = à¸›à¹ˆà¸§à¸¢ (To get sick)", isPinyin: true },
    { q: "ä¼‘æ¯", options: ["xiÅ« xi", "xiÅ« xÄ«", "xiÇ” xi", "xiÅ« xÃ­"], answer: 0, explain: "xiÅ« xi = à¸à¸±à¸à¸œà¹ˆà¸­à¸™ (Rest) *xi è¯»è½»å£°", isPinyin: true },
    { q: "è€³æœµ", options: ["Ä›r duo", "Ä›r duÇ’", "Ã©r duo", "Ä›r dÅu"], answer: 0, explain: "Ä›r duo = à¸«à¸¹ (Ears)", isPinyin: true },
    { q: "æ¼‚äº®", options: ["piÃ o liang", "piÄo liang", "piÃ o liÃ ng", "biÃ o liang"], answer: 0, explain: "piÃ o liang = à¸ªà¸§à¸¢ (Beautiful)", isPinyin: true },
    { q: "å¤´å‘", options: ["tÃ³u fa", "tÃ³u fÃ ", "tÃ³u fÇ", "dÃ³u fa"], answer: 0, explain: "tÃ³u fa = à¹€à¸ªà¹‰à¸™à¸œà¸¡ (Hair)", isPinyin: true },
    { q: "èˆ’æœ", options: ["shÅ« fu", "sÅ« fu", "shÅ« fÃº", "shÅ« fÃ¹"], answer: 0, explain: "shÅ« fu = à¸ªà¸šà¸²à¸¢ (Comfortable)", isPinyin: true },
    { q: "å› ä¸º", options: ["yÄ«n wÃ¨i", "yÄ«n wÃ©i", "yÄ«ng wÃ¨i", "yÄ«n huÃ¬"], answer: 0, explain: "yÄ«n wÃ¨i = à¹€à¸à¸£à¸²à¸°à¸§à¹ˆà¸² (Because) - à¹ƒà¸Šà¹‰à¸šà¸­à¸à¹€à¸«à¸•à¸¸à¸œà¸¥/à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸", isPinyin: true },

    // --- Part 2: èº«ä½“éƒ¨ä½ä¸åŠ¨ä½œ (11-20) ---
    { q: "æˆ‘ä»¬è¦ç”¨____çœ‹ä¹¦ã€‚", options: ["<ruby>çœ¼ç›<rt>yÇnjing</rt></ruby>", "<ruby>è€³æœµ<rt>Ä›rduo</rt></ruby>", "<ruby>å˜´<rt>zuÇ</rt></ruby>", "<ruby>æ‰‹<rt>shÇ’u</rt></ruby>"], answer: 0, explain: "à¹ƒà¸Šà¹‰ 'à¸•à¸²' (yÇnjing) à¸­à¹ˆà¸²à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­", isPinyin: false },
    { q: "æˆ‘ä»¬ç”¨____å¬éŸ³ä¹ã€‚", options: ["<ruby>è€³æœµ<rt>Ä›rduo</rt></ruby>", "<ruby>çœ¼ç›<rt>yÇnjing</rt></ruby>", "<ruby>é¼»å­<rt>bÃ­zi</rt></ruby>", "<ruby>è„š<rt>jiÇo</rt></ruby>"], answer: 0, explain: "à¹ƒà¸Šà¹‰ 'à¸«à¸¹' (Ä›rduo) à¸Ÿà¸±à¸‡à¹€à¸à¸¥à¸‡", isPinyin: false },
    { q: "åƒé¥­å‰ï¼Œè¦æ´—____ã€‚", options: ["<ruby>æ‰‹<rt>shÇ’u</rt></ruby>", "<ruby>è„š<rt>jiÇo</rt></ruby>", "<ruby>å¤´<rt>tÃ³u</rt></ruby>", "<ruby>è€³æœµ<rt>Ä›rduo</rt></ruby>"], answer: 0, explain: "à¸à¹ˆà¸­à¸™à¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¸•à¹‰à¸­à¸‡à¸¥à¹‰à¸²à¸‡ 'à¸¡à¸·à¸­' (shÇ’u)", isPinyin: false },
    { q: "æˆ‘åƒåäº†ä¸œè¥¿ï¼Œ____ç–¼ã€‚", options: ["<ruby>è‚šå­<rt>dÃ¹zi</rt></ruby>", "<ruby>è„¸<rt>liÇn</rt></ruby>", "<ruby>çœ¼ç›<rt>yÇnjing</rt></ruby>", "<ruby>å¤´å‘<rt>tÃ³ufa</rt></ruby>"], answer: 0, explain: "à¸à¸´à¸™à¸‚à¸­à¸‡à¹„à¸¡à¹ˆà¸”à¸µà¸—à¸³à¹ƒà¸«à¹‰à¸›à¸§à¸” 'à¸—à¹‰à¸­à¸‡' (dÃ¹zi)", isPinyin: false },
    { q: "ä»–é•¿å¾—å¾ˆ____ã€‚", options: ["<ruby>é«˜<rt>gÄo</rt></ruby>", "<ruby>é•¿<rt>chÃ¡ng</rt></ruby>", "<ruby>è¿œ<rt>yuÇn</rt></ruby>", "<ruby>è¿‘<rt>jÃ¬n</rt></ruby>"], answer: 0, explain: "à¹€à¸‚à¸²à¸•à¸±à¸§ 'à¸ªà¸¹à¸‡' (gÄo) à¸¡à¸²à¸ - à¸šà¸£à¸£à¸¢à¸²à¸¢à¸£à¸¹à¸›à¸£à¹ˆà¸²à¸‡", isPinyin: false },
    { q: "å¥¹æœ‰ä¸€åŒå¤§å¤§çš„____ã€‚", options: ["<ruby>çœ¼ç›<rt>yÇnjing</rt></ruby>", "<ruby>é¼»å­<rt>bÃ­zi</rt></ruby>", "<ruby>å˜´å·´<rt>zuÇba</rt></ruby>", "<ruby>å¤´å‘<rt>tÃ³ufa</rt></ruby>"], answer: 0, explain: "à¸¥à¸±à¸à¸©à¸“à¸™à¸²à¸¡ 'à¸„à¸¹à¹ˆ' (shuÄng) à¹ƒà¸Šà¹‰à¸à¸±à¸š 'à¸”à¸§à¸‡à¸•à¸²' (yÇnjing)", isPinyin: false },
    { q: "ä»Šå¤©èµ°äº†å¾ˆå¤šè·¯ï¼Œ____å¾ˆç–¼ã€‚", options: ["<ruby>è„š<rt>jiÇo</rt></ruby>", "<ruby>æ‰‹<rt>shÇ’u</rt></ruby>", "<ruby>è„¸<rt>liÇn</rt></ruby>", "<ruby>å¤´<rt>tÃ³u</rt></ruby>"], answer: 0, explain: "à¹€à¸”à¸´à¸™à¹€à¸¢à¸­à¸° à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸ˆà¹‡à¸š 'à¹€à¸—à¹‰à¸²' (jiÇo)", isPinyin: false },
    { q: "ä»–çš„____å¾ˆçŸ­ï¼Œæ˜¯é»‘è‰²çš„ã€‚", options: ["<ruby>å¤´å‘<rt>tÃ³ufa</rt></ruby>", "<ruby>è„¸<rt>liÇn</rt></ruby>", "<ruby>çœ¼ç›<rt>yÇnjing</rt></ruby>", "<ruby>è€³æœµ<rt>Ä›rduo</rt></ruby>"], answer: 0, explain: "à¸ªà¸±à¹‰à¸™à¹à¸¥à¸°à¸ªà¸µà¸”à¸³ à¸„à¸·à¸­ 'à¸œà¸¡' (tÃ³ufa)", isPinyin: false },
    { q: "ä¸è¦è¯´è¯ï¼Œè¯·é—­ä¸Š____ã€‚", options: ["<ruby>å˜´<rt>zuÇ</rt></ruby>", "<ruby>æ‰‹<rt>shÇ’u</rt></ruby>", "<ruby>è„š<rt>jiÇo</rt></ruby>", "<ruby>å¤´<rt>tÃ³u</rt></ruby>"], answer: 0, explain: "à¸«à¹‰à¸²à¸¡à¸à¸¹à¸” à¸à¸£à¸¸à¸“à¸²à¸›à¸´à¸” 'à¸›à¸²à¸' (zuÇ)", isPinyin: false },
    { q: "è™½ç„¶ä»–80å²äº†ï¼Œä½†æ˜¯____å¾ˆå¥½ã€‚", options: ["<ruby>èº«ä½“<rt>shÄ“ntÇ</rt></ruby>", "<ruby>ç”Ÿæ—¥<rt>shÄ“ngrÃ¬</rt></ruby>", "<ruby>èº«é«˜<rt>shÄ“ngÄo</rt></ruby>", "<ruby>èº«è¾¹<rt>shÄ“nbiÄn</rt></ruby>"], answer: 0, explain: "à¸­à¸²à¸¢à¸¸à¸¡à¸²à¸à¹à¸•à¹ˆ 'à¸ªà¸¸à¸‚à¸ à¸²à¸à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢' (shÄ“ntÇ) à¹à¸‚à¹‡à¸‡à¹à¸£à¸‡", isPinyin: false },

    // --- Part 3: ç”Ÿç†çŠ¶æ€ (21-30) ---
    { q: "æˆ‘æƒ³å–æ°´ï¼Œæˆ‘____äº†ã€‚", options: ["<ruby>æ¸´<rt>kÄ›</rt></ruby>", "<ruby>é¥¿<rt>Ã¨</rt></ruby>", "<ruby>å›°<rt>kÃ¹n</rt></ruby>", "<ruby>é¥±<rt>bÇo</rt></ruby>"], answer: 0, explain: "à¸­à¸¢à¸²à¸à¸”à¸·à¹ˆà¸¡à¸™à¹‰à¸³ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸² 'à¸à¸£à¸°à¸«à¸²à¸¢à¸™à¹‰à¸³' (kÄ›)", isPinyin: false },
    { q: "æˆ‘æƒ³åƒé¥­ï¼Œæˆ‘____äº†ã€‚", options: ["<ruby>é¥¿<rt>Ã¨</rt></ruby>", "<ruby>æ¸´<rt>kÄ›</rt></ruby>", "<ruby>ç´¯<rt>lÃ¨i</rt></ruby>", "<ruby>å¥½<rt>hÇo</rt></ruby>"], answer: 0, explain: "à¸­à¸¢à¸²à¸à¸à¸´à¸™à¸‚à¹‰à¸²à¸§ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸² 'à¸«à¸´à¸§' (Ã¨)", isPinyin: false },
    { q: "å·¥ä½œäº†ä¸€å¤©ï¼Œæˆ‘å¾ˆ____ï¼Œæƒ³ç¡è§‰ã€‚", options: ["<ruby>ç´¯<rt>lÃ¨i</rt></ruby>", "<ruby>å¿™<rt>mÃ¡ng</rt></ruby>", "<ruby>é¥¿<rt>Ã¨</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>"], answer: 0, explain: "à¸—à¸³à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸§à¸±à¸™ à¸­à¸¢à¸²à¸à¸™à¸­à¸™ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸² 'à¹€à¸«à¸™à¸·à¹ˆà¸­à¸¢' (lÃ¨i)", isPinyin: false },
    { q: "æˆ‘____äº†ï¼Œè¦å»åŒ»é™¢çœ‹åŒ»ç”Ÿã€‚", options: ["<ruby>ç”Ÿç—…<rt>shÄ“ngbÃ¬ng</rt></ruby>", "<ruby>ç”Ÿæ°”<rt>shÄ“ngqÃ¬</rt></ruby>", "<ruby>ç”Ÿæ—¥<rt>shÄ“ngrÃ¬</rt></ruby>", "<ruby>ç”Ÿæ´»<rt>shÄ“nghuÃ³</rt></ruby>"], answer: 0, explain: "à¹„à¸›à¸«à¸²à¸«à¸¡à¸­ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸² 'à¸›à¹ˆà¸§à¸¢' (shÄ“ngbÃ¬ng)", isPinyin: false },
    { q: "åŒ»ç”Ÿç»™äº†æˆ‘ä¸€äº›____ã€‚", options: ["<ruby>è¯<rt>yÃ o</rt></ruby>", "<ruby>æ°´<rt>shuÇ</rt></ruby>", "<ruby>èŒ¶<rt>chÃ¡</rt></ruby>", "<ruby>ç—…<rt>bÃ¬ng</rt></ruby>"], answer: 0, explain: "à¸«à¸¡à¸­à¹ƒà¸«à¹‰ 'à¸¢à¸²' (yÃ o)", isPinyin: false },
    { q: "ä»Šå¤©å¤ª____äº†ï¼Œæˆ‘è¦ç©¿å¾ˆå¤šè¡£æœã€‚", options: ["<ruby>å†·<rt>lÄ›ng</rt></ruby>", "<ruby>çƒ­<rt>rÃ¨</rt></ruby>", "<ruby>é«˜<rt>gÄo</rt></ruby>", "<ruby>å¤§<rt>dÃ </rt></ruby>"], answer: 0, explain: "à¹ƒà¸ªà¹ˆà¹€à¸ªà¸·à¹‰à¸­à¹€à¸¢à¸­à¸°à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸­à¸²à¸à¸²à¸¨ 'à¸«à¸™à¸²à¸§' (lÄ›ng)", isPinyin: false },
    { q: "åƒäº†å¤ªå¤šä¸œè¥¿ï¼Œæˆ‘____äº†ã€‚", options: ["<ruby>é¥±<rt>bÇo</rt></ruby>", "<ruby>é¥¿<rt>Ã¨</rt></ruby>", "<ruby>æ¸´<rt>kÄ›</rt></ruby>", "<ruby>èƒ–<rt>pÃ ng</rt></ruby>"], answer: 0, explain: "à¸à¸´à¸™à¹€à¸¢à¸­à¸°à¸ˆà¸™ 'à¸­à¸´à¹ˆà¸¡' (bÇo)", isPinyin: false },
    { q: "ä½ æ€ä¹ˆäº†ï¼Ÿè„¸è‰²ä¸____ã€‚", options: ["<ruby>å¥½<rt>hÇo</rt></ruby>", "<ruby>é«˜<rt>gÄo</rt></ruby>", "<ruby>å¤š<rt>duÅ</rt></ruby>", "<ruby>å¤§<rt>dÃ </rt></ruby>"], answer: 0, explain: "à¸ªà¸µà¸«à¸™à¹‰à¸²à¹„à¸¡à¹ˆ 'à¸”à¸µ' (hÇo) - à¸”à¸¹à¸›à¹ˆà¸§à¸¢/à¸‹à¸µà¸”", isPinyin: false },
    { q: "æˆ‘ä¸æƒ³åŠ¨ï¼Œè§‰å¾—å¾ˆä¸____ã€‚", options: ["<ruby>èˆ’æœ<rt>shÅ«fu</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>æ¼‚äº®<rt>piÃ oliang</rt></ruby>", "<ruby>å®¹æ˜“<rt>rÃ³ngyÃ¬</rt></ruby>"], answer: 0, explain: "à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹„à¸¡à¹ˆ 'à¸ªà¸šà¸²à¸¢' (shÅ«fu) / à¹„à¸¡à¹ˆà¸ªà¸šà¸²à¸¢à¸•à¸±à¸§", isPinyin: false },
    { q: "è¿™å‡ å¤©å¤ª____äº†ï¼Œæ²¡æœ‰æ—¶é—´ä¼‘æ¯ã€‚", options: ["<ruby>å¿™<rt>mÃ¡ng</rt></ruby>", "<ruby>å¿«<rt>kuÃ i</rt></ruby>", "<ruby>æ…¢<rt>mÃ n</rt></ruby>", "<ruby>ç´¯<rt>lÃ¨i</rt></ruby>"], answer: 0, explain: "à¹„à¸¡à¹ˆà¸¡à¸µà¹€à¸§à¸¥à¸²à¸à¸±à¸ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸² 'à¸¢à¸¸à¹ˆà¸‡' (mÃ¡ng)", isPinyin: false },

    // --- Part 4: æƒ…æ„Ÿä¸é€»è¾‘ (31-40) ---
    { q: "ä»Šå¤©æ˜¯æˆ‘çš„ç”Ÿæ—¥ï¼Œæˆ‘å¾ˆ____ã€‚", options: ["<ruby>å¿«ä¹<rt>kuÃ ilÃ¨</rt></ruby>", "<ruby>ç”Ÿæ°”<rt>shÄ“ngqÃ¬</rt></ruby>", "<ruby>éš¾è¿‡<rt>nÃ¡nguÃ²</rt></ruby>", "<ruby>ç´¯<rt>lÃ¨i</rt></ruby>"], answer: 0, explain: "à¸§à¸±à¸™à¹€à¸à¸´à¸”à¸ˆà¸°à¸£à¸¹à¹‰à¸ªà¸¶à¸ 'à¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸¸à¸‚' (kuÃ ilÃ¨)", isPinyin: false },
    { q: "åˆ«____ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½çš„ã€‚", options: ["<ruby>æ‹…å¿ƒ<rt>dÄnxÄ«n</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>æ”¾å¿ƒ<rt>fÃ ngxÄ«n</rt></ruby>", "<ruby>å°å¿ƒ<rt>xiÇoxÄ«n</rt></ruby>"], answer: 0, explain: "à¸›à¸¥à¸­à¸šà¹ƒà¸ˆà¸§à¹ˆà¸²à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ 'à¸à¸±à¸‡à¸§à¸¥' (dÄnxÄ«n)", isPinyin: false },
    { q: "å­©å­____äº†ï¼Œå› ä¸ºä»–æ‰¾ä¸åˆ°å¦ˆå¦ˆã€‚", options: ["<ruby>å“­<rt>kÅ«</rt></ruby>", "<ruby>ç¬‘<rt>xiÃ o</rt></ruby>", "<ruby>è¯´<rt>shuÅ</rt></ruby>", "<ruby>åƒ<rt>chÄ«</rt></ruby>"], answer: 0, explain: "à¸«à¸²à¹à¸¡à¹ˆà¹„à¸¡à¹ˆà¹€à¸ˆà¸­ à¹€à¸”à¹‡à¸à¸ˆà¸¶à¸‡ 'à¸£à¹‰à¸­à¸‡à¹„à¸«à¹‰' (kÅ«)", isPinyin: false },
    { q: "ä»–å¬äº†è¿™ä¸ªæ•…äº‹ï¼Œå“ˆå“ˆå¤§____ã€‚", options: ["<ruby>ç¬‘<rt>xiÃ o</rt></ruby>", "<ruby>å“­<rt>kÅ«</rt></ruby>", "<ruby>å«<rt>jiÃ o</rt></ruby>", "<ruby>è¯´<rt>shuÅ</rt></ruby>"], answer: 0, explain: "à¸«à¸±à¸§à¹€à¸£à¸²à¸°à¹€à¸ªà¸µà¸¢à¸‡à¸”à¸±à¸‡ (à¸®à¹ˆà¸²à¹†) à¸„à¸·à¸­ 'à¸«à¸±à¸§à¹€à¸£à¸²à¸°' (xiÃ o)", isPinyin: false },
    { q: "æˆ‘å¾ˆ____çœ‹ç”µå½±ã€‚", options: ["<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>è§‰å¾—<rt>juÃ©de</rt></ruby>", "<ruby>è®¤è¯†<rt>rÃ¨nshi</rt></ruby>"], answer: 0, explain: "à¸šà¸­à¸à¸„à¸§à¸²à¸¡à¸Šà¸­à¸š 'à¸Šà¸­à¸š' (xÇhuan) à¸”à¸¹à¸«à¸™à¸±à¸‡", isPinyin: false },
    { q: "çˆ¸çˆ¸å¾ˆ____ï¼Œå› ä¸ºæˆ‘æ²¡å»ä¸Šå­¦ã€‚", options: ["<ruby>ç”Ÿæ°”<rt>shÄ“ngqÃ¬</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>èˆ’æœ<rt>shÅ«fu</rt></ruby>", "<ruby>ç¬‘<rt>xiÃ o</rt></ruby>"], answer: 0, explain: "à¹„à¸¡à¹ˆà¹„à¸›à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™ à¸à¹ˆà¸­à¸ˆà¸¶à¸‡ 'à¹‚à¸à¸£à¸˜' (shÄ“ngqÃ¬)", isPinyin: false },
    { q: "æˆ‘____ä»–æ˜¯æˆ‘çš„è€å¸ˆã€‚", options: ["<ruby>è§‰å¾—<rt>juÃ©de</rt></ruby>", "<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>çˆ±<rt>Ã i</rt></ruby>", "<ruby>æƒ³<rt>xiÇng</rt></ruby>"], answer: 0, explain: "à¸‰à¸±à¸™ 'à¸£à¸¹à¹‰à¸ªà¸¶à¸/à¸„à¸´à¸”à¸§à¹ˆà¸²' (juÃ©de) à¹€à¸‚à¸²à¹€à¸›à¹‡à¸™à¸„à¸£à¸¹à¸‚à¸­à¸‡à¸‰à¸±à¸™ (à¸„à¸²à¸”à¹€à¸”à¸²)", isPinyin: false },
    { q: "è¿™ä»¶è¡£æœçœŸ____ï¼", options: ["<ruby>æ¼‚äº®<rt>piÃ oliang</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>çˆ±<rt>Ã i</rt></ruby>"], answer: 0, explain: "à¸Šà¸¡à¸ªà¸´à¹ˆà¸‡à¸‚à¸­à¸‡à¹ƒà¸Šà¹‰ 'à¸ªà¸§à¸¢' (piÃ oliang)", isPinyin: false },
    { q: "ä½ ____ä»€ä¹ˆï¼Ÿå¯ä»¥å‘Šè¯‰æˆ‘å—ï¼Ÿ", options: ["<ruby>æƒ³<rt>xiÇng</rt></ruby>", "<ruby>çˆ±<rt>Ã i</rt></ruby>", "<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>åƒ<rt>xiÃ ng</rt></ruby>"], answer: 0, explain: "à¸„à¸¸à¸“ 'à¸„à¸´à¸”' (xiÇng) à¸­à¸°à¹„à¸£à¸­à¸¢à¸¹à¹ˆ?", isPinyin: false },
    { q: "å¦ˆå¦ˆ____æˆ‘ä¸åƒæ—©é¥­ã€‚", options: ["<ruby>æ‹…å¿ƒ<rt>dÄnxÄ«n</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>å¸Œæœ›<rt>xÄ«wÃ ng</rt></ruby>"], answer: 0, explain: "à¹„à¸¡à¹ˆà¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¹€à¸Šà¹‰à¸² à¹à¸¡à¹ˆà¸ˆà¸¶à¸‡ 'à¹€à¸›à¹‡à¸™à¸«à¹ˆà¸§à¸‡' (dÄnxÄ«n)", isPinyin: false }
];

// --- åº”ç”¨ç¨‹åºé€»è¾‘ (Application Logic) ---
const app = {
    currentIndex: 0,
    score: 0,
    answers: new Array(questionData.length).fill(null),
    shuffledQs: [],

    // å¯åŠ¨ç»ƒä¹ 
    startQuiz: function() {
        // æ•°æ®å¤„ç†ï¼šæ‰“ä¹±é€‰é¡¹é¡ºåºï¼Œä¿æŒé¢˜ç›®é¡ºåº
        this.shuffledQs = questionData.map((item, index) => {
            let indices = [0, 1, 2, 3];
            // Fisher-Yates æ´—ç‰Œç®—æ³•
            for (let i = indices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indices[i], indices[j]] = [indices[j], indices[i]];
            }
            return {
                ...item,
                originalIndex: index,
                shuffledIndices: indices
            };
        });

        // é‡ç½®çŠ¶æ€
        this.currentIndex = 0;
        this.score = 0;
        this.answers.fill(null);

        // åˆ‡æ¢ç•Œé¢
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'flex';
        document.getElementById('score').innerText = 'å¾—åˆ†: 0';
        
        this.renderQuestion();
    },

    // æ¸²æŸ“é¢˜ç›®
    renderQuestion: function() {
        const index = this.currentIndex;
        const q = this.shuffledQs[index];
        const container = document.getElementById('question-container');
        
        // æ›´æ–°é¡¶éƒ¨è¿›åº¦
        document.getElementById('progress').innerText = `é¢˜ç›®: ${index + 1}/${questionData.length}`;

        // æ ‡ç­¾ï¼šåŒºåˆ†æ‹¼éŸ³é¢˜å’Œè¯æ±‡é¢˜
        let badgeText = q.isPinyin ? "æ‹¼éŸ³æµ‹è¯• (Pinyin)" : "è¯æ±‡ä¸è¯­å¢ƒ (Vocab & Context)";
        
        let html = `
            <div class="q-badge">${badgeText}</div>
            <div class="q-text">${index + 1}. ${q.q}</div>
            <div class="options-grid">
        `;

        // æ¸²æŸ“é€‰é¡¹
        q.shuffledIndices.forEach(optIndex => {
            const optText = q.options[optIndex];
            const userChoice = this.answers[index];
            
            let btnClass = "option-btn";
            let disabledAttr = "";
            let clickHandler = `onclick="app.handleAnswer(${optIndex})"`;

            // çŠ¶æ€åˆ¤æ–­
            if (userChoice !== null) {
                disabledAttr = "disabled";
                clickHandler = "";
                if (optIndex === q.answer) {
                    btnClass += " correct"; // æ­£ç¡®ç­”æ¡ˆç»¿
                } else if (userChoice === optIndex) {
                    btnClass += " wrong"; // é”™é€‰çº¢
                }
            }

            html += `<button class="${btnClass}" ${disabledAttr} ${clickHandler}>${optText}</button>`;
        });

        html += `</div>`;
        container.innerHTML = html;

        this.updateFeedbackAndNav();
    },

    // å¤„ç†å›ç­”
    handleAnswer: function(selectedIndex) {
        if (this.answers[this.currentIndex] !== null) return;

        const q = this.shuffledQs[this.currentIndex];
        this.answers[this.currentIndex] = selectedIndex;

        // è®¡åˆ† (æ»¡åˆ†80ï¼Œå…±40é¢˜ => æ¯é¢˜2åˆ†)
        if (selectedIndex === q.answer) {
            this.score += 2;
            document.getElementById('score').innerText = `å¾—åˆ†: ${this.score}`;
        }

        this.renderQuestion();
    },

    // æ›´æ–°åé¦ˆåŒºå’ŒæŒ‰é’®
    updateFeedbackAndNav: function() {
        const index = this.currentIndex;
        const userChoice = this.answers[index];
        const q = this.shuffledQs[index];
        
        const feedbackBox = document.getElementById('feedback-box');
        const nextBtn = document.getElementById('btn-next');
        const prevBtn = document.getElementById('btn-prev');

        // æ˜¾ç¤ºè§£æ
        if (userChoice !== null) {
            const isCorrect = (userChoice === q.answer);
            feedbackBox.style.display = 'block';
            feedbackBox.className = `feedback ${isCorrect ? 'is-correct' : 'is-wrong'}`;
            
            // è·å–æ­£ç¡®ç­”æ¡ˆçº¯æ–‡æœ¬
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = q.options[q.answer];
            const correctText = tempDiv.innerText;

            feedbackBox.innerHTML = `
                <strong>${isCorrect ? 'âœ… å›ç­”æ­£ç¡® (à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡)' : 'âŒ å›ç­”é”™è¯¯ (à¸•à¸­à¸šà¸œà¸´à¸”)'}</strong>
                <div style="margin-top: 5px;">æ­£ç¡®ç­”æ¡ˆ: <b>${correctText}</b></div>
                <div class="thai-expl">è§£æ: ${q.explain}</div>
            `;
            nextBtn.disabled = false;
        } else {
            feedbackBox.style.display = 'none';
            nextBtn.disabled = true;
        }

        // æŒ‰é’®é€»è¾‘
        prevBtn.disabled = (index === 0);
        
        if (index === questionData.length - 1) {
            nextBtn.innerText = "æŸ¥çœ‹æˆç»© (à¸”à¸¹à¸„à¸°à¹à¸™à¸™)";
        } else {
            nextBtn.innerText = "ä¸‹ä¸€é¢˜ (à¸‚à¹‰à¸­à¸–à¸±à¸”à¹„à¸›)";
        }
    },

    // å¯¼èˆª
    nextQuestion: function() {
        if (this.currentIndex < questionData.length - 1) {
            this.currentIndex++;
            this.renderQuestion();
        } else {
            this.showResult();
        }
    },

    prevQuestion: function() {
        if (this.currentIndex > 0) {
            this.currentIndex--;
            this.renderQuestion();
        }
    },

    // ç»“æœé¡µ
    showResult: function() {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = this.score;
    }
};
</script>

</body>
</html>
