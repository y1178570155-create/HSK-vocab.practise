<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8.å­¦ä¹ ã€å·¥ä½œä¸ç¤¾ä¼šæ´»åŠ¨ - HSKç»ƒä¹ </title>
    <style>
        :root {
            /* è“ç»¿è‰²ä¸»é¢˜ï¼Œä»£è¡¨æˆé•¿ä¸æ´»åŠ› */
            --primary: #009688;
            --secondary: #4DB6AC;
            --correct: #27ae60;
            --wrong: #c0392b;
            --bg: #E0F2F1;
            --card-bg: #ffffff;
            --text: #004D40;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--text);
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 150, 136, 0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 16px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        h1 { margin: 0; font-size: 1.2rem; letter-spacing: 1px; }
        .stats { margin-top: 8px; font-size: 0.95rem; opacity: 0.95; font-weight: 500; }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            flex-grow: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        /* æ¬¢è¿ç•Œé¢ */
        .start-screen {
            text-align: center;
            margin: auto;
            width: 100%;
        }
        .start-icon { font-size: 4rem; margin-bottom: 20px; }
        .start-info {
            background: #f1f2f6;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: left;
            border: 1px solid #b2dfdb;
        }
        .start-info p { margin: 10px 0; font-size: 1rem; color: #555; }
        
        .btn-start {
            background: var(--correct);
            color: white;
            border: none;
            padding: 16px 50px;
            font-size: 1.25rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }
        .btn-start:active { transform: scale(0.96); }

        /* é¢˜ç›®åŒºåŸŸ */
        .q-badge {
            display: inline-block;
            background: #E0F2F1;
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .q-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #2d3436;
        }

        /* æ‹¼éŸ³æ ‡æ³¨æ ·å¼ */
        ruby { ruby-position: over; }
        rt { font-size: 0.6em; color: #7f8c8d; font-weight: normal; user-select: none; }

        /* é€‰é¡¹æŒ‰é’® */
        .options-grid { display: grid; gap: 14px; }
        
        .option-btn {
            background: white;
            border: 2px solid #cfd8dc;
            padding: 16px;
            border-radius: 12px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #455a64;
            position: relative;
        }

        .option-btn:hover:not(:disabled) { border-color: var(--primary); background: #E0F2F1; }

        .option-btn.correct { background: #e8f8f5; border-color: var(--correct); color: #009688; font-weight: bold; }
        .option-btn.wrong { background: #ffeaa7; border-color: var(--wrong); color: #d63031; }
        .option-btn:disabled { cursor: default; }

        /* è§£æåŒºåŸŸ */
        .feedback {
            margin-top: 25px;
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid #bdc3c7;
            display: none;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .feedback.is-correct { border-left-color: var(--correct); background: #f0fff4; }
        .feedback.is-wrong { border-left-color: var(--wrong); background: #fff5f5; }

        .thai-expl { margin-top: 8px; font-size: 1rem; color: #666; }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-buttons {
            margin-top: auto;
            padding-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: opacity 0.2s;
        }
        .nav-btn.prev { background: #eceff1; color: #78909c; }
        .nav-btn.next { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(0, 150, 136, 0.3); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }

        /* ç»“æœé¡µ */
        .result-score { font-size: 4rem; color: var(--primary); margin: 20px 0; font-weight: 800; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>8.å­¦ä¹ ã€å·¥ä½œä¸ç¤¾ä¼šæ´»åŠ¨</h1>
        <div class="stats">
            <span id="progress">å‡†å¤‡å¼€å§‹</span> | <span id="score">å¾—åˆ†: 0</span>
        </div>
    </header>

    <div class="content">
        <div id="start-screen" class="start-screen">
            <div class="start-icon">ğŸ“šğŸ’¼ğŸ‰</div>
            <h2>HSK è¯æ±‡ä¸“é¡¹ç»ƒä¹ </h2>
            <div class="start-info">
                <p>ğŸ“ <strong>å†…å®¹ï¼š</strong> å­¦æ ¡ã€èŒåœºã€ç¤¾äº¤ã€æ´»åŠ¨</p>
                <p>ğŸ“ <strong>é¢˜é‡ï¼š</strong> 31 é¢˜ (31 à¸‚à¹‰à¸­)</p>
                <p>ğŸ’¯ <strong>æ»¡åˆ†ï¼š</strong> 62 åˆ† (62 à¸„à¸°à¹à¸™à¸™)</p>
                <p>ğŸ’¡ <strong>è§„åˆ™ï¼š</strong> åªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ</p>
            </div>
            <button class="btn-start" onclick="app.startQuiz()">å¼€å§‹ç»ƒä¹  (à¹€à¸£à¸´à¹ˆà¸¡)</button>
        </div>

        <div id="quiz-area" style="display: none; height: 100%; flex-direction: column;">
            <div id="question-container" style="flex-grow: 1;"></div>
            
            <div id="feedback-box" class="feedback"></div>

            <div class="nav-buttons">
                <button id="btn-prev" class="nav-btn prev" onclick="app.prevQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                <button id="btn-next" class="nav-btn next" onclick="app.nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <div id="result-screen" class="start-screen" style="display: none;">
            <h2>ç»ƒä¹ å®Œæˆ (à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™)</h2>
            <div class="result-score" id="final-score">0</div>
            <p style="color: #636e72; margin-bottom: 30px;">æ»¡åˆ† 62 åˆ†</p>
            <button class="btn-start" onclick="location.reload()">å†ç»ƒä¸€æ¬¡ (à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡)</button>
        </div>
    </div>
</div>

<script>
// é¢˜ç›®æ•°æ®ï¼šå·²ç§»é™¤ 13(æŠ¥çº¸), 22(é—®é¢˜), 30(ä¸‹ç­), 35(æƒ³)
const questionData = [
    // --- Part 1: æ‹¼éŸ³ (1-5) ---
    { q: "å­¦ä¹ ", options: ["xuÃ© xÃ­", "xuÃ© xi", "xuÄ› xÃ­", "xuÃ© xÃ¬"], answer: 0, explain: "xuÃ© xÃ­ = à¹€à¸£à¸µà¸¢à¸™ (Study)", isPinyin: true },
    { q: "å·¥ä½œ", options: ["gÅng zuÃ²", "gÅng zÃ¹o", "gÅng zuo", "gÃ²ng zuÃ²"], answer: 0, explain: "gÅng zuÃ² = à¸—à¸³à¸‡à¸²à¸™ (Work)", isPinyin: true },
    { q: "è€ƒè¯•", options: ["kÇo shÃ¬", "kÄo shÃ¬", "kÇo shi", "kÃ o shÃ¬"], answer: 0, explain: "kÇo shÃ¬ = à¸ªà¸­à¸š (Exam)", isPinyin: true },
    { q: "ç»ç†", options: ["jÄ«ng lÇ", "jÄ«n lÇ", "jÄ«ng li", "jÄ«ng lÃ­"], answer: 0, explain: "jÄ«ng lÇ = à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£ (Manager)", isPinyin: true },
    { q: "å¸®åŠ©", options: ["bÄng zhÃ¹", "bÃ¡ng zhÃ¹", "bÄng zÃ¹", "bÃ ng zhÃ¹"], answer: 0, explain: "bÄng zhÃ¹ = à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­ (Help)", isPinyin: true },

    // --- Part 2: è¯æ±‡ä¸æƒ…æ™¯ (6-13) ---
    { q: "<ruby>è€å¸ˆ<rt>lÇoshÄ«</rt></ruby>åœ¨____ï¼Œè¯·ä¸è¦<ruby>è¯´è¯<rt>shuÅhuÃ </rt></ruby>ã€‚", options: ["<ruby>ä¸Šè¯¾<rt>shÃ ngkÃ¨</rt></ruby>", "<ruby>ä¸‹è¯¾<rt>xiÃ kÃ¨</rt></ruby>", "<ruby>ä¸Šç­<rt>shÃ ngbÄn</rt></ruby>", "<ruby>å›å®¶<rt>huÃ­jiÄ</rt></ruby>"], answer: 0, explain: "à¸„à¸£à¸¹à¸à¸³à¸¥à¸±à¸‡ 'à¸ªà¸­à¸™/à¹€à¸‚à¹‰à¸²à¹€à¸£à¸µà¸¢à¸™' (shÃ ngkÃ¨) à¸à¸£à¸¸à¸“à¸²à¸­à¸¢à¹ˆà¸²à¸„à¸¸à¸¢à¸à¸±à¸™", isPinyin: false },
    { q: "æˆ‘ç”¨____<ruby>å†™å­—<rt>xiÄ›zÃ¬</rt></ruby>ã€‚", options: ["<ruby>é“…ç¬”<rt>qiÄnbÇ</rt></ruby>", "<ruby>ç”µè„‘<rt>diÃ nnÇo</rt></ruby>", "<ruby>ç”µè¯<rt>diÃ nhuÃ </rt></ruby>", "<ruby>ç”µè§†<rt>diÃ nshÃ¬</rt></ruby>"], answer: 0, explain: "à¹ƒà¸Šà¹‰ 'à¸”à¸´à¸™à¸ªà¸­' (qiÄnbÇ) à¹€à¸‚à¸µà¸¢à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­", isPinyin: false },
    { q: "ä»–å–œæ¬¢____ï¼Œå”±å¾—å¾ˆå¥½å¬ã€‚", options: ["<ruby>å”±æ­Œ<rt>chÃ nggÄ“</rt></ruby>", "<ruby>è·³èˆ<rt>tiÃ owÇ”</rt></ruby>", "<ruby>è¿åŠ¨<rt>yÃ¹ndÃ²ng</rt></ruby>", "<ruby>æ¸¸æ³³<rt>yÃ³uyÇ’ng</rt></ruby>"], answer: 0, explain: "à¸£à¹‰à¸­à¸‡à¹€à¸à¸£à¸²à¸° à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸Šà¸­à¸š 'à¸£à¹‰à¸­à¸‡à¹€à¸à¸¥à¸‡' (chÃ nggÄ“)", isPinyin: false },
    { q: "æˆ‘ä»¬å»____å§ï¼Œ<ruby>è¸¢è¶³çƒ<rt>tÄ« zÃºqiÃº</rt></ruby>ã€‚", options: ["<ruby>è¿åŠ¨<rt>yÃ¹ndÃ²ng</rt></ruby>", "<ruby>å•†åº—<rt>shÄngdiÃ n</rt></ruby>", "<ruby>åŒ»é™¢<rt>yÄ«yuÃ n</rt></ruby>", "<ruby>å…¬å¸<rt>gÅngsÄ«</rt></ruby>"], answer: 0, explain: "à¹„à¸›à¹€à¸•à¸°à¸šà¸­à¸¥ à¸„à¸·à¸­à¹„à¸› 'à¸­à¸­à¸à¸à¸³à¸¥à¸±à¸‡à¸à¸²à¸¢' (yÃ¹ndÃ²ng)", isPinyin: false },
    { q: "ä»–æ•™æˆ‘ä»¬<ruby>æ±‰è¯­<rt>hÃ nyÇ”</rt></ruby>ï¼Œä»–æ˜¯æˆ‘ä»¬çš„____ã€‚", options: ["<ruby>è€å¸ˆ<rt>lÇoshÄ«</rt></ruby>", "<ruby>å­¦ç”Ÿ<rt>xuÃ©sheng</rt></ruby>", "<ruby>åŒå­¦<rt>tÃ³ngxuÃ©</rt></ruby>", "<ruby>åŒ»ç”Ÿ<rt>yÄ«shÄ“ng</rt></ruby>"], answer: 0, explain: "à¸ªà¸­à¸™à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™ à¹€à¸‚à¸²à¸„à¸·à¸­ 'à¸„à¸£à¸¹' (lÇoshÄ«)", isPinyin: false },
    { q: "çˆ¸çˆ¸åœ¨____<ruby>å·¥ä½œ<rt>gÅngzuÃ²</rt></ruby>ï¼Œä»–æ˜¯ç»ç†ã€‚", options: ["<ruby>å…¬å¸<rt>gÅngsÄ«</rt></ruby>", "<ruby>å­¦æ ¡<rt>xuÃ©xiÃ o</rt></ruby>", "<ruby>æ•™å®¤<rt>jiÃ oshÃ¬</rt></ruby>", "<ruby>æˆ¿é—´<rt>fÃ¡ngjiÄn</rt></ruby>"], answer: 0, explain: "à¹€à¸›à¹‡à¸™à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£ à¸—à¸³à¸‡à¸²à¸™à¸—à¸µà¹ˆ 'à¸šà¸£à¸´à¸©à¸±à¸—' (gÅngsÄ«)", isPinyin: false },
    { q: "æˆ‘æ¥____ä¸€ä¸‹ï¼Œè¿™æ˜¯æˆ‘çš„<ruby>æœ‹å‹<rt>pÃ©ngyou</rt></ruby>ã€‚", options: ["<ruby>ä»‹ç»<rt>jiÃ¨shÃ o</rt></ruby>", "<ruby>å‡†å¤‡<rt>zhÇ”nbÃ¨i</rt></ruby>", "<ruby>å¼€å§‹<rt>kÄishÇ</rt></ruby>", "<ruby>å¸®åŠ©<rt>bÄngzhÃ¹</rt></ruby>"], answer: 0, explain: "à¸‚à¸­ 'à¹à¸™à¸°à¸™à¸³' (jiÃ¨shÃ o) à¹ƒà¸«à¹‰à¸£à¸¹à¹‰à¸ˆà¸±à¸", isPinyin: false },
    // åŸ13å·²åˆ 
    { q: "<ruby>æ˜å¤©<rt>mÃ­ngtiÄn</rt></ruby>è¦<ruby>è€ƒè¯•<rt>kÇoshÃ¬</rt></ruby>ï¼Œæˆ‘è¦____ä¸€ä¸‹ã€‚", options: ["<ruby>å‡†å¤‡<rt>zhÇ”nbÃ¨i</rt></ruby>", "<ruby>å›ç­”<rt>huÃ­dÃ¡</rt></ruby>", "<ruby>è¿åŠ¨<rt>yÃ¹ndÃ²ng</rt></ruby>", "<ruby>æ—…æ¸¸<rt>lÇšyÃ³u</rt></ruby>"], answer: 0, explain: "à¸ˆà¸°à¸ªà¸­à¸šà¸•à¹‰à¸­à¸‡ 'à¹€à¸•à¸£à¸µà¸¢à¸¡à¸•à¸±à¸§' (zhÇ”nbÃ¨i)", isPinyin: false },
    { q: "æˆ‘æƒ³å»<ruby>ä¸­å›½<rt>ZhÅngguÃ³</rt></ruby>____ã€‚", options: ["<ruby>æ—…æ¸¸<rt>lÇšyÃ³u</rt></ruby>", "<ruby>è¿åŠ¨<rt>yÃ¹ndÃ²ng</rt></ruby>", "<ruby>ç”Ÿç—…<rt>shÄ“ngbÃ¬ng</rt></ruby>", "<ruby>ç¡è§‰<rt>shuÃ¬jiÃ o</rt></ruby>"], answer: 0, explain: "à¹„à¸›à¸ˆà¸µà¸™à¹€à¸à¸·à¹ˆà¸­ 'à¸—à¹ˆà¸­à¸‡à¹€à¸—à¸µà¹ˆà¸¢à¸§' (lÇšyÃ³u)", isPinyin: false },

    // --- Part 3: è¯­æ³•ä¸å¥å­ç»“æ„ (16-24) ---
    { q: "è¿™æœ¬ä¹¦æˆ‘çœ‹____äº†ã€‚", options: ["<ruby>æ‡‚<rt>dÇ’ng</rt></ruby>", "<ruby>ä¼š<rt>huÃ¬</rt></ruby>", "<ruby>è§<rt>jiÃ n</rt></ruby>", "<ruby>åˆ°<rt>dÃ o</rt></ruby>"], answer: 0, explain: "çœ‹æ‡‚ = à¸­à¹ˆà¸²à¸™à¸£à¸¹à¹‰à¹€à¸£à¸·à¹ˆà¸­à¸‡/à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ (Result complement)", isPinyin: false },
    { q: "<ruby>å­¦ç”Ÿ<rt>xuÃ©sheng</rt></ruby>ä»¬éƒ½åœ¨____é‡Œ<ruby>å­¦ä¹ <rt>xuÃ©xÃ­</rt></ruby>ã€‚", options: ["<ruby>æ•™å®¤<rt>jiÃ oshÃ¬</rt></ruby>", "<ruby>æœºåœº<rt>jÄ«chÇng</rt></ruby>", "<ruby>é¥­é¦†<rt>fÃ nguÇn</rt></ruby>", "<ruby>å•†åº—<rt>shÄngdiÃ n</rt></ruby>"], answer: 0, explain: "à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™à¹€à¸£à¸µà¸¢à¸™à¹ƒà¸™ 'à¸«à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™' (jiÃ oshÃ¬)", isPinyin: false },
    { q: "ä»Šå¤©çš„____å¾ˆå¤šï¼Œæˆ‘è¿˜æ²¡åšå®Œã€‚", options: ["<ruby>ä½œä¸š<rt>zuÃ²yÃ¨</rt></ruby>", "<ruby>è¯¾<rt>kÃ¨</rt></ruby>", "<ruby>ä¹¦<rt>shÅ«</rt></ruby>", "<ruby>ç¬”<rt>bÇ</rt></ruby>"], answer: 0, explain: "à¸¢à¸±à¸‡à¸—à¸³à¹„à¸¡à¹ˆà¹€à¸ªà¸£à¹‡à¸ˆ à¸„à¸·à¸­ 'à¸à¸²à¸£à¸šà¹‰à¸²à¸™' (zuÃ²yÃ¨)", isPinyin: false },
    { q: "æˆ‘____è¯´ä¸€ç‚¹å„¿<ruby>æ±‰è¯­<rt>hÃ nyÇ”</rt></ruby>ã€‚", options: ["<ruby>ä¼š<rt>huÃ¬</rt></ruby>", "<ruby>è¦<rt>yÃ o</rt></ruby>", "<ruby>æƒ³<rt>xiÇng</rt></ruby>", "<ruby>çœ‹<rt>kÃ n</rt></ruby>"], answer: 0, explain: "à¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸²à¸¡à¸²à¸£à¸– (à¸ªà¸à¸´à¸¥) à¹ƒà¸Šà¹‰ 'huÃ¬' (ä¼š)", isPinyin: false },
    { q: "åˆ°äº†å®¶ï¼Œè¯·____æˆ‘<ruby>æ‰“ç”µè¯<rt>dÇ diÃ nhuÃ </rt></ruby>ã€‚", options: ["<ruby>ç»™<rt>gÄ›i</rt></ruby>", "<ruby>å’Œ<rt>hÃ©</rt></ruby>", "<ruby>å¯¹<rt>duÃ¬</rt></ruby>", "<ruby>åœ¨<rt>zÃ i</rt></ruby>"], answer: 0, explain: "ç»™...æ‰“ç”µè¯ (à¹‚à¸—à¸£à¸«à¸²...)", isPinyin: false },
    { q: "<ruby>ç”µå½±<rt>diÃ nyÇng</rt></ruby>____<ruby>å¼€å§‹<rt>kÄishÇ</rt></ruby>ï¼Ÿ", options: ["<ruby>ä»€ä¹ˆæ—¶å€™<rt>shÃ©nme shÃ­hou</rt></ruby>", "<ruby>ä»€ä¹ˆ<rt>shÃ©nme</rt></ruby>", "<ruby>æ€ä¹ˆ<rt>zÄ›nme</rt></ruby>", "<ruby>å“ªé‡Œ<rt>nÇlÇ</rt></ruby>"], answer: 0, explain: "à¸–à¸²à¸¡à¹€à¸§à¸¥à¸²à¹€à¸£à¸´à¹ˆà¸¡ à¹ƒà¸Šà¹‰ 'shÃ©nme shÃ­hou' (à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆ)", isPinyin: false },
    // åŸ22å·²åˆ 
    { q: "<ruby>å“¥å“¥<rt>gÄ“ge</rt></ruby><ruby>æ­£åœ¨<rt>zhÃ¨ngzÃ i</rt></ruby>____<ruby>å·¥ä½œ<rt>gÅngzuÃ²</rt></ruby>ã€‚", options: ["<ruby>æ‰¾<rt>zhÇo</rt></ruby>", "<ruby>çœ‹<rt>kÃ n</rt></ruby>", "<ruby>å»<rt>qÃ¹</rt></ruby>", "<ruby>æ¥<rt>lÃ¡i</rt></ruby>"], answer: 0, explain: "à¸à¸³à¸¥à¸±à¸‡ 'à¸«à¸²' (zhÇo) à¸‡à¸²à¸™", isPinyin: false },
    { q: "____<ruby>ç”Ÿç—…<rt>shÄ“ngbÃ¬ng</rt></ruby>äº†ï¼Œæ‰€ä»¥æ²¡æ¥<ruby>ä¸Šè¯¾<rt>shÃ ngkÃ¨</rt></ruby>ã€‚", options: ["<ruby>å› ä¸º<rt>yÄ«nwÃ¨i</rt></ruby>", "<ruby>ä½†æ˜¯<rt>dÃ nshÃ¬</rt></ruby>", "<ruby>è™½ç„¶<rt>suÄ«rÃ¡n</rt></ruby>", "<ruby>å¦‚æœ<rt>rÃºguÇ’</rt></ruby>"], answer: 0, explain: "å› ä¸º...æ‰€ä»¥ (à¹€à¸à¸£à¸²à¸°à¸§à¹ˆà¸²...)", isPinyin: false },
    { q: "<ruby>å­©å­<rt>hÃ¡izi</rt></ruby>ä»¬åœ¨<ruby>å…¬å›­<rt>gÅngyuÃ¡n</rt></ruby>ç©å¾—____ã€‚", options: ["<ruby>å¾ˆå¼€å¿ƒ<rt>hÄ›n kÄixÄ«n</rt></ruby>", "<ruby>å¼€å¿ƒ<rt>kÄixÄ«n</rt></ruby>", "<ruby>ä¸å¼€å¿ƒ<rt>bÃ¹ kÄixÄ«n</rt></ruby>", "<ruby>å¤ªå¼€å¿ƒ<rt>tÃ i kÄixÄ«n</rt></ruby>"], answer: 0, explain: "Verb + å¾— + Adj (Complement) -> 'hÄ›n kÄixÄ«n'", isPinyin: false },

    // --- Part 4: ç¤¾äº¤ä¸é€»è¾‘ (26-31) ---
    { q: "ç¥ä½ <ruby>ç”Ÿæ—¥<rt>shÄ“ngrÃ¬</rt></ruby>____ï¼", options: ["<ruby>å¿«ä¹<rt>kuÃ ilÃ¨</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>å¥½<rt>hÇo</rt></ruby>", "<ruby>å¤§<rt>dÃ </rt></ruby>"], answer: 0, explain: "à¸ªà¸¸à¸‚à¸ªà¸±à¸™à¸•à¹Œà¸§à¸±à¸™à¹€à¸à¸´à¸” = ç”Ÿæ—¥å¿«ä¹ (ShÄ“ngrÃ¬ kuÃ ilÃ¨)", isPinyin: false },
    { q: "æ¥<ruby>ç”µè¯<rt>diÃ nhuÃ </rt></ruby>æ—¶ï¼Œæˆ‘ä»¬å…ˆè¯´ï¼šâ€œ____ï¼Œä½ å¥½ï¼â€", options: ["<ruby>å–‚<rt>wÃ©i</rt></ruby>", "<ruby>å˜¿<rt>hÄ“i</rt></ruby>", "<ruby>å•Š<rt>Ã </rt></ruby>", "<ruby>å“¦<rt>Ã³</rt></ruby>"], answer: 0, explain: "à¸£à¸±à¸šà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸à¸¹à¸”à¸§à¹ˆà¸² 'à¸®à¸±à¸¥à¹‚à¸«à¸¥' (wÃ©i)", isPinyin: false },
    { q: "è¿™ä¸ªè¯æ˜¯ä»€ä¹ˆ____ï¼Ÿ", options: ["<ruby>æ„æ€<rt>yÃ¬si</rt></ruby>", "<ruby>æ„ä¹¦<rt>yÃ¬shÅ«</rt></ruby>", "<ruby>æ„è§<rt>yÃ¬jiÃ n</rt></ruby>", "<ruby>æ±‰å­—<rt>hÃ nzÃ¬</rt></ruby>"], answer: 0, explain: "à¸„à¸³à¸™à¸µà¹‰ 'à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢' (yÃ¬si) à¸§à¹ˆà¸²à¸­à¸°à¹„à¸£", isPinyin: false },
    { q: "____ä½ ä»¬æ¥æˆ‘å®¶ç©ï¼", options: ["<ruby>æ¬¢è¿<rt>huÄnyÃ­ng</rt></ruby>", "<ruby>é«˜å…´<rt>gÄoxÃ¬ng</rt></ruby>", "<ruby>å–œæ¬¢<rt>xÇhuan</rt></ruby>", "<ruby>è¿›æ¥<rt>jÃ¬nlai</rt></ruby>"], answer: 0, explain: "'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸š' (huÄnyÃ­ng) à¸¡à¸²à¹€à¸—à¸µà¹ˆà¸¢à¸§à¸šà¹‰à¸²à¸™", isPinyin: false },
    // åŸ30å·²åˆ 
    { q: "ä»–æ˜¯<ruby>å…¬å¸<rt>gÅngsÄ«</rt></ruby>çš„____ï¼Œæˆ‘ä»¬è¦å¬ä»–çš„ã€‚", options: ["<ruby>ç»ç†<rt>jÄ«nglÇ</rt></ruby>", "<ruby>æœåŠ¡å‘˜<rt>fÃºwÃ¹yuÃ¡n</rt></ruby>", "<ruby>å¸æœº<rt>sÄ«jÄ«</rt></ruby>", "<ruby>åŒ»ç”Ÿ<rt>yÄ«shÄ“ng</rt></ruby>"], answer: 0, explain: "à¸•à¹‰à¸­à¸‡à¸Ÿà¸±à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™ 'à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£' (jÄ«nglÇ)", isPinyin: false },
    { q: "è¯·____æˆ‘ä¸€ä¸‹ï¼Œè¿™ä¸ª<ruby>ç®±å­<rt>xiÄngzi</rt></ruby>å¤ªé‡äº†ã€‚", options: ["<ruby>å¸®<rt>bÄng</rt></ruby>", "<ruby>åš<rt>zuÃ²</rt></ruby>", "<ruby>è®©<rt>rÃ ng</rt></ruby>", "<ruby>ç»™<rt>gÄ›i</rt></ruby>"], answer: 0, explain: "à¸à¸¥à¹ˆà¸­à¸‡à¸«à¸™à¸±à¸ à¸‚à¸­à¹ƒà¸«à¹‰ 'à¸Šà¹ˆà¸§à¸¢' (bÄng)", isPinyin: false },
    { q: "ä»Šå¤©çš„<ruby>è€ƒè¯•<rt>kÇoshÃ¬</rt></ruby>å¤ª____äº†ï¼Œæˆ‘ä¸ä¼šåšã€‚", options: ["<ruby>éš¾<rt>nÃ¡n</rt></ruby>", "<ruby>å®¹æ˜“<rt>rÃ³ngyÃ¬</rt></ruby>", "<ruby>å¥½<rt>hÇo</rt></ruby>", "<ruby>å¤§<rt>dÃ </rt></ruby>"], answer: 0, explain: "à¸—à¸³à¹„à¸¡à¹ˆà¹„à¸”à¹‰ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸‚à¹‰à¸­à¸ªà¸­à¸š 'à¸¢à¸²à¸' (nÃ¡n)", isPinyin: false },
    { q: "å¤§å®¶éƒ½åœ¨____ï¼Œæˆ‘ä¹Ÿæƒ³è·³ã€‚", options: ["<ruby>è·³èˆ<rt>tiÃ owÇ”</rt></ruby>", "<ruby>å”±æ­Œ<rt>chÃ nggÄ“</rt></ruby>", "<ruby>è·‘æ­¥<rt>pÇobÃ¹</rt></ruby>", "<ruby>ç¡è§‰<rt>shuÃ¬jiÃ o</rt></ruby>"], answer: 0, explain: "à¸­à¸¢à¸²à¸ 'à¹€à¸•à¹‰à¸™' (tiÃ owÇ”) à¹€à¸«à¸¡à¸·à¸­à¸™à¸„à¸™à¸­à¸·à¹ˆà¸™", isPinyin: false }
    // åŸ35å·²åˆ 
];

// --- ç¨‹åºé€»è¾‘ ---
const app = {
    currentIndex: 0,
    score: 0,
    answers: new Array(questionData.length).fill(null),
    shuffledQs: [],

    init: function() {
        // æ´—ç‰Œé¢˜ç›®é€‰é¡¹
        this.shuffledQs = questionData.map((item, index) => {
            let indices = [0, 1, 2, 3];
            // Fisher-Yates shuffle
            for (let i = indices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indices[i], indices[j]] = [indices[j], indices[i]];
            }
            return {
                ...item,
                originalIndex: index,
                shuffledIndices: indices
            };
        });
    },

    startQuiz: function() {
        this.init();
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'flex';
        this.renderQuestion();
    },

    renderQuestion: function() {
        const qIndex = this.currentIndex;
        const q = this.shuffledQs[qIndex];
        
        // æ›´æ–°è¿›åº¦
        document.getElementById('progress').innerText = `é¢˜ç›®: ${qIndex + 1}/${questionData.length}`;
        
        // æ¸²æŸ“é¢˜ç›®
        const container = document.getElementById('question-container');
        let badge = q.isPinyin ? "æ‹¼éŸ³æµ‹è¯• (Pinyin)" : "è¯æ±‡ä¸è¯­æ³• (Vocab & Grammar)";
        
        let html = `<div class="q-badge">${badge}</div>`;
        html += `<div class="q-text">${qIndex + 1}. ${q.q}</div>`;
        html += `<div class="options-grid">`;
        
        q.shuffledIndices.forEach(optIndex => {
            let btnClass = "option-btn";
            let disabled = "";
            let onclick = `onclick="app.checkAnswer(${optIndex})"`;
            
            // å¦‚æœå·²ä½œç­”
            if (this.answers[qIndex] !== null) {
                disabled = "disabled";
                onclick = "";
                if (optIndex === q.answer) {
                    btnClass += " correct";
                } else if (this.answers[qIndex] === optIndex) {
                    btnClass += " wrong";
                }
            }
            
            html += `<button class="${btnClass}" ${disabled} ${onclick}>${q.options[optIndex]}</button>`;
        });
        
        html += `</div>`;
        container.innerHTML = html;

        this.updateFeedback();
        this.updateNavButtons();
    },

    checkAnswer: function(selectedIndex) {
        if (this.answers[this.currentIndex] !== null) return;
        
        this.answers[this.currentIndex] = selectedIndex;
        const q = this.shuffledQs[this.currentIndex];
        
        if (selectedIndex === q.answer) {
            this.score += 2; // æ¯é¢˜2åˆ†
            document.getElementById('score').innerText = `å¾—åˆ†: ${this.score}`;
        }
        
        this.renderQuestion();
    },

    updateFeedback: function() {
        const qIndex = this.currentIndex;
        const q = this.shuffledQs[qIndex];
        const userAns = this.answers[qIndex];
        const feedbackBox = document.getElementById('feedback-box');
        
        if (userAns !== null) {
            feedbackBox.style.display = 'block';
            const isCorrect = userAns === q.answer;
            feedbackBox.className = `feedback ${isCorrect ? 'is-correct' : 'is-wrong'}`;
            
            // è·å–æ­£ç¡®ç­”æ¡ˆæ–‡æœ¬ï¼ˆå»é™¤Rubyæ ‡ç­¾ç”¨äºçº¯æ–‡æœ¬æ˜¾ç¤ºï¼‰
            let tempDiv = document.createElement("div");
            tempDiv.innerHTML = q.options[q.answer];
            let correctText = tempDiv.innerText;

            feedbackBox.innerHTML = `
                <strong>${isCorrect ? 'âœ… å›ç­”æ­£ç¡® (à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡)' : 'âŒ å›ç­”é”™è¯¯ (à¸•à¸­à¸šà¸œà¸´à¸”)'}</strong>
                <div style="margin-top:5px;">æ­£ç¡®ç­”æ¡ˆ: <b>${correctText}</b></div>
                <div class="thai-expl">è§£æ: ${q.explain}</div>
            `;
        } else {
            feedbackBox.style.display = 'none';
        }
    },

    updateNavButtons: function() {
        document.getElementById('btn-prev').disabled = this.currentIndex === 0;
        const nextBtn = document.getElementById('btn-next');
        
        if (this.answers[this.currentIndex] === null) {
            nextBtn.disabled = true;
        } else {
            nextBtn.disabled = false;
        }

        if (this.currentIndex === questionData.length - 1) {
            nextBtn.innerText = "æŸ¥çœ‹æˆç»© (à¸”à¸¹à¸„à¸°à¹à¸™à¸™)";
            nextBtn.onclick = () => this.showResult();
        } else {
            nextBtn.innerText = "ä¸‹ä¸€é¢˜ (à¸‚à¹‰à¸­à¸–à¸±à¸”à¹„à¸›)";
            nextBtn.onclick = () => this.nextQuestion();
        }
    },

    nextQuestion: function() {
        if (this.currentIndex < questionData.length - 1) {
            this.currentIndex++;
            this.renderQuestion();
        }
    },

    prevQuestion: function() {
        if (this.currentIndex > 0) {
            this.currentIndex--;
            this.renderQuestion();
        }
    },

    showResult: function() {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = this.score;
    }
};
</script>

</body>
</html>